<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Regular.woff2" as="font">
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Bold.woff2" as="font">
    
    
    
        <link rel="shortcut icon" href="/ios.github.io/./././images/userImage.JPG">
    

    
    
        
<link rel="stylesheet" href="/ios.github.io/css/mdui.min.v1.0.0.css">

    
    
<link rel="stylesheet" href="/ios.github.io/css/main.css">
<link rel="stylesheet" href="/ios.github.io/css/iconfont.css">


    
    

    
        <script data-ad-client="ca-" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    












          


    
    
    <title>
        
            swift学习日记(五) | 猪会飞的博客
        
    </title>
    
    
<meta name="generator" content="Hexo 8.1.1"></head>
<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-teal mdui-theme-accent-blue">
  
  <header class="mdui-appbar mdui-appbar-fixed">
  <div id="toolbar" class="mdui-toolbar mdui-color-theme">
    <button class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar', swipe: true}"><i class="iconfont icon-menu"></i></button>
    <a href="/ios.github.io/" class="mdui-typo-headline">猪会飞的博客</a>
    <a href="/ios.github.io/" class="header-subtitle mdui-typo-headline"></a>
    <div class="mdui-toolbar-spacer"></div>
    <button class="mdui-btn mdui-btn-icon" mdui-dialog="{target: '#search'}" mdui-tooltip="{content: 'search'}"><i class="iconfont icon-search"></i></button>
  </div>
</header>

<div class="mdui-dialog" id="search">
  
    <div class="search-form">
      <input type="search" class="search-form-input" placeholder="请输入关键字" onfocus="listenSearchFunc()">
    </div>
    <div class="search-result" data-resource="/ios.github.io/search.xml"></div>
  
</div>

  <aside id="sidebar" class="mdui-drawer">
    <div class="mdui-tab" mdui-tab>
        <a href="#sidebar-tab1" id="sidebartab" class="mdui-ripple mdui-tab-active">站点概览</a>
        <a href="#sidebar-tab2" id="sidebartab" class="mdui-ripple">关于</a>
    </div>

    
    <div id="sidebar-tab1" class="mdui-p-a-1">
        <div class="mdui-list">
            
                
                <a href="/ios.github.io/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-home"></i>
                    </div>
                    <div class="mdui-list-item-content">主页</div>
                </a>
            
                
                <a href="/ios.github.io/archives/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-archive"></i>
                    </div>
                    <div class="mdui-list-item-content">归档</div>
                </a>
            
                
                <a href="/ios.github.io/tags/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-bookmark"></i>
                    </div>
                    <div class="mdui-list-item-content">标签</div>
                </a>
            
                
                <a href="/ios.github.io/about/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-user"></i>
                    </div>
                    <div class="mdui-list-item-content">关于</div>
                </a>
            
            <div class="mdui-list-item mdui-ripple">
                <div class="mdui-list-item-icon">
                    <i class="iconfont icon-moon"></i>
                </div>
                <div class="mdui-list-item-content">夜间模式</div>
                <label class="mdui-switch" id="darkmode">
                  <input type="checkbox" id="nightmode_switch"/>
                  <i class="mdui-switch-icon"></i>
                </label>
            </div>           
        </div>
    </div>

    
    <div id="sidebar-tab2" class="mdui-p-a-1">
        <div class="sidebar-overview">
            <div class="sidebar-avatar">
                
                    <img src="/ios.github.io/./././images/userImage.JPG"/>
                
            </div>
            <div class="sidebar-author-name">猪会飞</div>
            <div class="sidebar-description"></div>
        </div>
        <div class="sidebar-links">
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-mail"></i></span>
                    <a href="mailto:2839029331@qq.com" class="mdui-chip-title">E-Mail</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a target="_blank" rel="noopener" href="https://github.com/YCCIT123" class="mdui-chip-title">GitHub</a>
                </div>
            
        </div>
        <ul class="mdui-list" mdui-collapse="{accordion: true}">
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-link"></i>
                    </div>
                    <div class="mdui-list-item-content">友情链接</div>
                    <div class="mdui-collapse-item-arrow">
                        <i class="mdui-list-item-icon iconfont icon-angle-down"></i>
                    </div>
                </div>
                <ul id="linksList" class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    
                        <a target="_blank" rel="noopener" href="https://garybear.cn/hexo-theme-meadow/" class="mdui-list-item mdui-ripple">
                            Meadow说明文档
                        </a>
                    
                </ul>
            </li>
        </ul>
    </div>

    <div class="mdui-divider"></div>
    
    
</aside>
  
  <main id="main-contain" class="mdui-container mdui-m-t-5">
    <article id="article" class="mdui-card mdui-p-b-2 mdui-m-b-5">
  <header class="mdui-card-media">
    
    
      <div class="post-header"> 
  <a class="post-header-title" href="/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/">swift学习日记(五)</a>
  <div class="post-header-meta">
    <span>
      <span class="iconfont icon-calendar"></span>
      发布于:&nbsp;2025-12-07
    </span>
    <span>
      <span class="iconfont icon-calendar-check"></span>
      更新于:&nbsp;2025-12-04
    </span>
    <span>
      <span class="iconfont icon-folder"></span>
      分类于:&nbsp;
    </span>
    
  </div>
</div>   
    



    
    
    <div class="mdui-card-menu">
    
      <button class="mdui-btn mdui-btn-icon mdui-text-color-teal" mdui-menu="{target: '#share_menu', align: 'right'}"><i class="iconfont icon-share"></i></button>
      <ul class="mdui-menu" id="share_menu">
        <li class="mdui-menu-item">
          <a href="http://service.weibo.com/share/share.php?appkey=&title=swift学习日记(五)&url=https://yccit123.github.io/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/&pic=https://yccit123.github.io/ios.github.io/ios.github.io/./././images/userImage.JPG&searchPic=false&style=simple" target="_blank" class="mdui-ripple">分享到 Weibo</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://twitter.com/intent/tweet?text=swift学习日记(五)&url=https://yccit123.github.io/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/&via=猪会飞" target="_blank" class="mdui-ripple">分享到 Twitter</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://yccit123.github.io/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/" target="_blank" class="mdui-ripple">分享到 Facebook</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://plus.google.com/share?url=https://yccit123.github.io/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/" target="_blank" class="mdui-ripple">分享到 Google+</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://yccit123.github.io/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/&title=swift学习日记(五)" target="_blank" class="mdui-ripple">分享到 LinkedIn</a>
        </li>
        <li class="mdui-menu-item">
          <a href="http://connect.qq.com/widget/shareqq/index.html?site=猪会飞的博客&title=swift学习日记(五)&summary=&pics=https://yccit123.github.io/ios.github.io/ios.github.io/./././images/userImage.JPG&url=https://yccit123.github.io/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/" target="_blank" class="mdui-ripple">分享到 QQ</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://telegram.me/share/url?url=https://yccit123.github.io/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/&text=swift学习日记(五)" target="_blank" class="mdui-ripple">分享到 Telegram</a>
        </li>
      </ul>
    
  </div>
  </header>
  
  
  
  
  <div class="post-tags">
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /ios.github.io/tags/swift/ >swift</a>
      </i>
    
  </div>

  
  <div class="mdui-card-content mdui-typo mdui-p-x-4">
    <h1 id="Swift学习日记（五）：面向对象编程（类与结构体）"><a href="#Swift学习日记（五）：面向对象编程（类与结构体）" class="headerlink" title="Swift学习日记（五）：面向对象编程（类与结构体）"></a>Swift学习日记（五）：面向对象编程（类与结构体）</h1><h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>面向对象编程（OOP）是一种编程范式，它将数据和操作数据的方法组织在一起，形成对象。Swift支持多种面向对象编程特性，包括类、结构体、属性、方法、继承、构造函数等。在上一篇学习日记中，我们已经了解了Swift的函数和闭包。在这篇日记中，我们将深入探讨Swift的类和结构体，这是面向对象编程的基础。</p>
<h2 id="二、类与结构体的定义"><a href="#二、类与结构体的定义" class="headerlink" title="二、类与结构体的定义"></a>二、类与结构体的定义</h2><p>类和结构体是Swift中用于创建自定义数据类型的两种主要方式，它们有很多相似之处，但也有一些重要的区别。</p>
<h3 id="1-结构体的定义"><a href="#1-结构体的定义" class="headerlink" title="1. 结构体的定义"></a>1. 结构体的定义</h3><p>结构体的定义使用<code>struct</code>关键字：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 存储属性</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 计算属性</span></span><br><span class="line">    <span class="keyword">var</span> isAdult: <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age <span class="operator">&gt;=</span> <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方法</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">greet</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(name)</span>，今年<span class="subst">\(age)</span>岁。&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建结构体实例</span></span><br><span class="line"><span class="keyword">var</span> person <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问属性</span></span><br><span class="line"><span class="built_in">print</span>(person.name) <span class="comment">// 输出：张三</span></span><br><span class="line"><span class="built_in">print</span>(person.age) <span class="comment">// 输出：20</span></span><br><span class="line"><span class="built_in">print</span>(person.isAdult) <span class="comment">// 输出：true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line"><span class="built_in">print</span>(person.greet()) <span class="comment">// 输出：你好，我是张三，今年20岁。</span></span><br></pre></td></tr></table></figure>

<h3 id="2-类的定义"><a href="#2-类的定义" class="headerlink" title="2. 类的定义"></a>2. 类的定义</h3><p>类的定义使用<code>class</code>关键字：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">// 存储属性</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> studentID: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 计算属性</span></span><br><span class="line">    <span class="keyword">var</span> isAdult: <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age <span class="operator">&gt;=</span> <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方法</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">greet</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(name)</span>，今年<span class="subst">\(age)</span>岁，学号是<span class="subst">\(studentID)</span>。&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>, <span class="params">studentID</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">        <span class="keyword">self</span>.studentID <span class="operator">=</span> studentID</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建类实例</span></span><br><span class="line"><span class="keyword">let</span> student <span class="operator">=</span> <span class="type">Student</span>(name: <span class="string">&quot;李四&quot;</span>, age: <span class="number">22</span>, studentID: <span class="string">&quot;20210001&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问属性</span></span><br><span class="line"><span class="built_in">print</span>(student.name) <span class="comment">// 输出：李四</span></span><br><span class="line"><span class="built_in">print</span>(student.age) <span class="comment">// 输出：22</span></span><br><span class="line"><span class="built_in">print</span>(student.studentID) <span class="comment">// 输出：20210001</span></span><br><span class="line"><span class="built_in">print</span>(student.isAdult) <span class="comment">// 输出：true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line"><span class="built_in">print</span>(student.greet()) <span class="comment">// 输出：你好，我是李四，今年22岁，学号是20210001。</span></span><br></pre></td></tr></table></figure>

<!-- CATEGORY: 面向对象编程 -->
<!-- INTERVIEW_TOPIC: 类与结构体的区别 -->
<!-- HIGH_FREQUENCY_INTERVIEW: 值类型与引用类型 -->

<h2 id="三、类与结构体的区别"><a href="#三、类与结构体的区别" class="headerlink" title="三、类与结构体的区别"></a>三、类与结构体的区别</h2><p>虽然类和结构体有很多相似之处，但它们有以下几个重要的区别：</p>
<h3 id="1-值类型-vs-引用类型"><a href="#1-值类型-vs-引用类型" class="headerlink" title="1. 值类型 vs 引用类型"></a>1. 值类型 vs 引用类型</h3><ul>
<li><strong>结构体</strong>是值类型，当它被赋值给一个变量或常量，或者被传递给一个函数时，会被复制一份</li>
<li><strong>类</strong>是引用类型，当它被赋值给一个变量或常量，或者被传递给一个函数时，只会传递引用，不会复制</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 结构体示例（值类型）</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> point1 <span class="operator">=</span> <span class="type">Point</span>(x: <span class="number">10</span>, y: <span class="number">20</span>)</span><br><span class="line"><span class="keyword">var</span> point2 <span class="operator">=</span> point1 <span class="comment">// 复制一份</span></span><br><span class="line">point2.x <span class="operator">=</span> <span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(point1.x) <span class="comment">// 输出：10</span></span><br><span class="line"><span class="built_in">print</span>(point2.x) <span class="comment">// 输出：30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类示例（引用类型）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> person2 <span class="operator">=</span> person1 <span class="comment">// 传递引用</span></span><br><span class="line">person2.name <span class="operator">=</span> <span class="string">&quot;李四&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(person1.name) <span class="comment">// 输出：李四</span></span><br><span class="line"><span class="built_in">print</span>(person2.name) <span class="comment">// 输出：李四</span></span><br></pre></td></tr></table></figure>

<h3 id="2-继承"><a href="#2-继承" class="headerlink" title="2. 继承"></a>2. 继承</h3><ul>
<li><strong>类</strong>支持继承，可以从一个基类继承属性和方法</li>
<li><strong>结构体</strong>不支持继承</li>
</ul>
<h3 id="3-类型转换"><a href="#3-类型转换" class="headerlink" title="3. 类型转换"></a>3. 类型转换</h3><ul>
<li><strong>类</strong>支持类型转换，可以在运行时检查和转换类实例的类型</li>
<li><strong>结构体</strong>不支持类型转换</li>
</ul>
<h3 id="4-析构函数"><a href="#4-析构函数" class="headerlink" title="4. 析构函数"></a>4. 析构函数</h3><ul>
<li><strong>类</strong>可以定义析构函数，在实例被销毁前执行清理工作</li>
<li><strong>结构体</strong>不可以定义析构函数</li>
</ul>
<h3 id="5-引用计数"><a href="#5-引用计数" class="headerlink" title="5. 引用计数"></a>5. 引用计数</h3><ul>
<li><strong>类</strong>实例的内存管理通过引用计数实现</li>
<li><strong>结构体</strong>实例没有引用计数，因为它们是值类型</li>
</ul>
<!-- INTERVIEW_TOPIC: 属性 -->
<!-- HIGH_FREQUENCY_INTERVIEW: 存储属性与计算属性 -->

<h2 id="四、属性"><a href="#四、属性" class="headerlink" title="四、属性"></a>四、属性</h2><p>属性是与类、结构体或枚举关联的值。Swift提供了两种类型的属性：存储属性和计算属性。</p>
<h3 id="1-存储属性"><a href="#1-存储属性" class="headerlink" title="1. 存储属性"></a>1. 存储属性</h3><p>存储属性是实际存储在类或结构体实例中的值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 可变存储属性</span></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 不可变存储属性</span></span><br><span class="line">    <span class="keyword">let</span> gender: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">20</span>, gender: <span class="string">&quot;男&quot;</span>)</span><br><span class="line">person.name <span class="operator">=</span> <span class="string">&quot;李四&quot;</span> <span class="comment">// 可以修改</span></span><br><span class="line">person.age <span class="operator">=</span> <span class="number">21</span> <span class="comment">// 可以修改</span></span><br><span class="line"><span class="comment">// person.gender = &quot;女&quot; // 错误，不可变存储属性不能修改</span></span><br></pre></td></tr></table></figure>

<h3 id="2-计算属性"><a href="#2-计算属性" class="headerlink" title="2. 计算属性"></a>2. 计算属性</h3><p>计算属性不存储值，而是提供一个getter和可选的setter，用于计算值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> radius: <span class="type">Double</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 只读计算属性</span></span><br><span class="line">    <span class="keyword">var</span> area: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Double</span>.pi <span class="operator">*</span> radius <span class="operator">*</span> radius</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读写计算属性</span></span><br><span class="line">    <span class="keyword">var</span> diameter: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> radius <span class="operator">*</span> <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span>(newDiameter) &#123;</span><br><span class="line">            radius <span class="operator">=</span> newDiameter <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> circle <span class="operator">=</span> <span class="type">Circle</span>(radius: <span class="number">5.0</span>)</span><br><span class="line"><span class="built_in">print</span>(circle.area) <span class="comment">// 输出：78.53981633974483</span></span><br><span class="line"><span class="built_in">print</span>(circle.diameter) <span class="comment">// 输出：10.0</span></span><br><span class="line"></span><br><span class="line">circle.diameter <span class="operator">=</span> <span class="number">12.0</span></span><br><span class="line"><span class="built_in">print</span>(circle.radius) <span class="comment">// 输出：6.0</span></span><br><span class="line"><span class="built_in">print</span>(circle.area) <span class="comment">// 输出：113.09733552923255</span></span><br></pre></td></tr></table></figure>

<h3 id="3-属性观察器"><a href="#3-属性观察器" class="headerlink" title="3. 属性观察器"></a>3. 属性观察器</h3><p>属性观察器用于监测属性值的变化，可以在属性值即将改变或已经改变时执行代码：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span>(newName) &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;姓名即将从<span class="subst">\(name)</span>变为<span class="subst">\(newName)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">didSet</span>(oldName) &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;姓名已经从<span class="subst">\(oldName)</span>变为<span class="subst">\(name)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span>(newAge) &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;年龄即将从<span class="subst">\(age)</span>变为<span class="subst">\(newAge)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">didSet</span>(oldAge) &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;年龄已经从<span class="subst">\(oldAge)</span>变为<span class="subst">\(age)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">20</span>)</span><br><span class="line">person.name <span class="operator">=</span> <span class="string">&quot;李四&quot;</span></span><br><span class="line"><span class="comment">// 输出：</span></span><br><span class="line"><span class="comment">// 姓名即将从张三变为李四</span></span><br><span class="line"><span class="comment">// 姓名已经从张三变为李四</span></span><br><span class="line"></span><br><span class="line">person.age <span class="operator">=</span> <span class="number">21</span></span><br><span class="line"><span class="comment">// 输出：</span></span><br><span class="line"><span class="comment">// 年龄即将从20变为21</span></span><br><span class="line"><span class="comment">// 年龄已经从20变为21</span></span><br></pre></td></tr></table></figure>

<h3 id="4-类型属性"><a href="#4-类型属性" class="headerlink" title="4. 类型属性"></a>4. 类型属性</h3><p>类型属性是与类型本身关联的属性，而不是与类型的实例关联。使用<code>static</code>关键字定义：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Math</span> &#123;</span><br><span class="line">    <span class="comment">// 类型常量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> pi <span class="operator">=</span> <span class="number">3.141592653589793</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> e <span class="operator">=</span> <span class="number">2.718281828459045</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 类型变量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> calculationCount <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 类型方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">incrementCalculationCount</span>() &#123;</span><br><span class="line">        calculationCount <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.pi) <span class="comment">// 输出：3.141592653589793</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.e) <span class="comment">// 输出：2.718281828459045</span></span><br><span class="line"></span><br><span class="line"><span class="type">Math</span>.incrementCalculationCount()</span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.calculationCount) <span class="comment">// 输出：1</span></span><br></pre></td></tr></table></figure>

<p>对于类，还可以使用<code>class</code>关键字定义可被子类重写的类型属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BaseClass</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;BaseClass&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubClass</span>: <span class="title class_ inherited__">BaseClass</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">class</span> <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;SubClass&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">BaseClass</span>.description) <span class="comment">// 输出：BaseClass</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">SubClass</span>.description) <span class="comment">// 输出：SubClass</span></span><br></pre></td></tr></table></figure>

<h2 id="五、方法"><a href="#五、方法" class="headerlink" title="五、方法"></a>五、方法</h2><p>方法是与类、结构体或枚举关联的函数。</p>
<h3 id="1-实例方法"><a href="#1-实例方法" class="headerlink" title="1. 实例方法"></a>1. 实例方法</h3><p>实例方法是属于类或结构体实例的方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 实例方法</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">greet</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(name)</span>，今年<span class="subst">\(age)</span>岁。&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 修改实例属性的实例方法，需要使用mutating关键字</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">celebrateBirthday</span>() &#123;</span><br><span class="line">        age <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;生日快乐！现在<span class="subst">\(name)</span><span class="subst">\(age)</span>岁了。&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(person.greet()) <span class="comment">// 输出：你好，我是张三，今年20岁。</span></span><br><span class="line">person.celebrateBirthday() <span class="comment">// 输出：生日快乐！现在张三21岁了。</span></span><br><span class="line"><span class="built_in">print</span>(person.age) <span class="comment">// 输出：21</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：在结构体的实例方法中修改实例属性，需要使用<code>mutating</code>关键字，而类的实例方法不需要。</p>
<h3 id="2-类型方法"><a href="#2-类型方法" class="headerlink" title="2. 类型方法"></a>2. 类型方法</h3><p>类型方法是属于类或结构体类型本身的方法，使用<code>static</code>关键字定义：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Math</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> pi <span class="operator">=</span> <span class="number">3.141592653589793</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 类型方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">circleArea</span>(<span class="params">radius</span>: <span class="type">Double</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pi <span class="operator">*</span> radius <span class="operator">*</span> radius</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">circleCircumference</span>(<span class="params">radius</span>: <span class="type">Double</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> <span class="operator">*</span> pi <span class="operator">*</span> radius</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.circleArea(radius: <span class="number">5.0</span>)) <span class="comment">// 输出：78.53981633974483</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.circleCircumference(radius: <span class="number">5.0</span>)) <span class="comment">// 输出：31.41592653589793</span></span><br></pre></td></tr></table></figure>

<p>对于类，还可以使用<code>class</code>关键字定义可被子类重写的类型方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BaseClass</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="keyword">func</span> <span class="title function_">hello</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Hello from BaseClass&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubClass</span>: <span class="title class_ inherited__">BaseClass</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">class</span> <span class="keyword">func</span> <span class="title function_">hello</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Hello from SubClass&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">BaseClass</span>.hello() <span class="comment">// 输出：Hello from BaseClass</span></span><br><span class="line"><span class="type">SubClass</span>.hello() <span class="comment">// 输出：Hello from SubClass</span></span><br></pre></td></tr></table></figure>

<h2 id="六、构造函数"><a href="#六、构造函数" class="headerlink" title="六、构造函数"></a>六、构造函数</h2><p>构造函数是用于创建类或结构体实例的特殊方法。</p>
<h3 id="1-结构体的构造函数"><a href="#1-结构体的构造函数" class="headerlink" title="1. 结构体的构造函数"></a>1. 结构体的构造函数</h3><p>结构体默认提供了逐一成员构造函数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用逐一成员构造函数创建实例</span></span><br><span class="line"><span class="keyword">var</span> person <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p>也可以自定义构造函数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 自定义构造函数</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 另一个自定义构造函数</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用自定义构造函数创建实例</span></span><br><span class="line"><span class="keyword">var</span> baby <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;宝宝&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(baby.age) <span class="comment">// 输出：0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> adult <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(adult.age) <span class="comment">// 输出：20</span></span><br></pre></td></tr></table></figure>

<h3 id="2-类的构造函数"><a href="#2-类的构造函数" class="headerlink" title="2. 类的构造函数"></a>2. 类的构造函数</h3><p>类的构造函数需要初始化所有存储属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 自定义构造函数</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p>类还支持指定构造函数和便利构造函数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 指定构造函数</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 便利构造函数，调用指定构造函数</span></span><br><span class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(name: name, age: <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> baby <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;宝宝&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(baby.age) <span class="comment">// 输出：0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> adult <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>, age: <span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(adult.age) <span class="comment">// 输出：20</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：便利构造函数需要使用<code>convenience</code>关键字，并且必须调用同一个类中的指定构造函数。</p>
<h2 id="七、继承"><a href="#七、继承" class="headerlink" title="七、继承"></a>七、继承</h2><p>继承是面向对象编程的一个重要特性，它允许一个类（子类）继承另一个类（父类）的属性和方法。</p>
<h3 id="1-基本继承"><a href="#1-基本继承" class="headerlink" title="1. 基本继承"></a>1. 基本继承</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">greet</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(name)</span>，今年<span class="subst">\(age)</span>岁。&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类，继承自Person</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>: <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> studentID: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 子类的构造函数，需要调用父类的构造函数</span></span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>, <span class="params">studentID</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.studentID <span class="operator">=</span> studentID</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name, age: age) <span class="comment">// 调用父类的构造函数</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 重写父类的方法</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">greet</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;你好，我是学生<span class="subst">\(name)</span>，今年<span class="subst">\(age)</span>岁，学号是<span class="subst">\(studentID)</span>。&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> student <span class="operator">=</span> <span class="type">Student</span>(name: <span class="string">&quot;李四&quot;</span>, age: <span class="number">22</span>, studentID: <span class="string">&quot;20210001&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(student.greet()) <span class="comment">// 输出：你好，我是学生李四，今年22岁，学号是20210001。</span></span><br></pre></td></tr></table></figure>

<h3 id="2-重写属性"><a href="#2-重写属性" class="headerlink" title="2. 重写属性"></a>2. 重写属性</h3><p>子类可以重写父类的计算属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> isAdult: <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age <span class="operator">&gt;=</span> <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>: <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 重写计算属性</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> isAdult: <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age <span class="operator">&gt;=</span> <span class="number">20</span> <span class="comment">// 学生的成年标准提高到20岁</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person <span class="operator">=</span> <span class="type">Person</span>(age: <span class="number">19</span>)</span><br><span class="line"><span class="keyword">let</span> student <span class="operator">=</span> <span class="type">Student</span>(age: <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(person.isAdult) <span class="comment">// 输出：true</span></span><br><span class="line"><span class="built_in">print</span>(student.isAdult) <span class="comment">// 输出：false</span></span><br></pre></td></tr></table></figure>

<h3 id="3-防止重写"><a href="#3-防止重写" class="headerlink" title="3. 防止重写"></a>3. 防止重写</h3><p>可以使用<code>final</code>关键字防止类、属性或方法被重写：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// final类，不能被继承</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">FinalClass</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误，不能继承final类</span></span><br><span class="line"><span class="comment">// class SubClass: FinalClass &#123;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// final方法，不能被重写</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">func</span> <span class="title function_">introduce</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;我是<span class="subst">\(name)</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// final属性，不能被重写</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">var</span> fullName: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="八、析构函数"><a href="#八、析构函数" class="headerlink" title="八、析构函数"></a>八、析构函数</h2><p>析构函数是在类实例被销毁前执行的方法，用于执行清理工作。只有类可以定义析构函数。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FileHandler</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> fileName: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">fileName</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.fileName <span class="operator">=</span> fileName</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;打开文件：<span class="subst">\(fileName)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">readFile</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;读取文件内容&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 析构函数</span></span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;关闭文件：<span class="subst">\(fileName)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">processFile</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> fileHandler <span class="operator">=</span> <span class="type">FileHandler</span>(fileName: <span class="string">&quot;test.txt&quot;</span>)</span><br><span class="line">    fileHandler.readFile()</span><br><span class="line">    <span class="comment">// fileHandler在这里超出作用域，会被销毁</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">processFile()</span><br><span class="line"><span class="comment">// 输出：</span></span><br><span class="line"><span class="comment">// 打开文件：test.txt</span></span><br><span class="line"><span class="comment">// 读取文件内容</span></span><br><span class="line"><span class="comment">// 关闭文件：test.txt</span></span><br></pre></td></tr></table></figure>

<h2 id="九、内容机制与知识点总结"><a href="#九、内容机制与知识点总结" class="headerlink" title="九、内容机制与知识点总结"></a>九、内容机制与知识点总结</h2><h3 id="1-Swift面向对象编程的设计原则"><a href="#1-Swift面向对象编程的设计原则" class="headerlink" title="1. Swift面向对象编程的设计原则"></a>1. Swift面向对象编程的设计原则</h3><p>Swift的面向对象编程支持体现了几个核心设计原则：</p>
<ul>
<li><strong>类型安全</strong>：通过严格的类型检查确保代码的可靠性和安全性</li>
<li><strong>值类型优先</strong>：鼓励使用结构体等值类型，减少引用类型带来的复杂性</li>
<li><strong>灵活性</strong>：同时支持类和结构体，开发者可以根据需要选择合适的类型</li>
<li><strong>继承与多态</strong>：通过类的继承和方法重写实现多态行为</li>
<li><strong>内存安全</strong>：通过引用计数和自动内存管理确保内存使用的安全性</li>
</ul>
<h3 id="2-核心知识点总结"><a href="#2-核心知识点总结" class="headerlink" title="2. 核心知识点总结"></a>2. 核心知识点总结</h3><table>
<thead>
<tr>
<th>概念</th>
<th>描述</th>
<th>适用类型</th>
</tr>
</thead>
<tbody><tr>
<td>存储属性</td>
<td>实际存储在实例中的值</td>
<td>类、结构体</td>
</tr>
<tr>
<td>计算属性</td>
<td>不存储值，而是通过getter&#x2F;setter计算值</td>
<td>类、结构体、枚举</td>
</tr>
<tr>
<td>属性观察器</td>
<td>监测属性值变化并执行代码</td>
<td>类、结构体</td>
</tr>
<tr>
<td>类型属性</td>
<td>与类型本身关联的属性，而非实例</td>
<td>类、结构体、枚举</td>
</tr>
<tr>
<td>实例方法</td>
<td>属于类或结构体实例的方法</td>
<td>类、结构体</td>
</tr>
<tr>
<td>类型方法</td>
<td>属于类或结构体类型本身的方法</td>
<td>类、结构体</td>
</tr>
<tr>
<td>构造函数</td>
<td>创建类或结构体实例的特殊方法</td>
<td>类、结构体</td>
</tr>
<tr>
<td>指定构造函数</td>
<td>负责初始化所有属性的构造函数</td>
<td>类</td>
</tr>
<tr>
<td>便利构造函数</td>
<td>调用其他构造函数的辅助构造函数</td>
<td>类</td>
</tr>
<tr>
<td>继承</td>
<td>子类继承父类的属性和方法</td>
<td>类</td>
</tr>
<tr>
<td>方法重写</td>
<td>子类重新实现父类的方法</td>
<td>类</td>
</tr>
<tr>
<td>析构函数</td>
<td>实例销毁前执行的清理方法</td>
<td>类</td>
</tr>
</tbody></table>
<h2 id="十、遇到的问题及解决方案"><a href="#十、遇到的问题及解决方案" class="headerlink" title="十、遇到的问题及解决方案"></a>十、遇到的问题及解决方案</h2><h3 id="1-结构体实例方法无法修改属性"><a href="#1-结构体实例方法无法修改属性" class="headerlink" title="1. 结构体实例方法无法修改属性"></a>1. 结构体实例方法无法修改属性</h3><p><strong>问题</strong>：在结构体的实例方法中尝试修改属性时，出现编译错误。</p>
<p><strong>解决方案</strong>：在结构体的实例方法前添加<code>mutating</code>关键字。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 添加mutating关键字</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">celebrateBirthday</span>() &#123;</span><br><span class="line">        age <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-子类构造函数未初始化所有属性"><a href="#2-子类构造函数未初始化所有属性" class="headerlink" title="2. 子类构造函数未初始化所有属性"></a>2. 子类构造函数未初始化所有属性</h3><p><strong>问题</strong>：在子类的构造函数中，编译错误提示未初始化所有属性。</p>
<p><strong>解决方案</strong>：确保先初始化子类特有的属性，然后调用父类的构造函数。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>: <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> studentID: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>, <span class="params">studentID</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.studentID <span class="operator">=</span> studentID  <span class="comment">// 先初始化子类属性</span></span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name, age: age)  <span class="comment">// 再调用父类构造函数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-引用类型的意外修改"><a href="#3-引用类型的意外修改" class="headerlink" title="3. 引用类型的意外修改"></a>3. 引用类型的意外修改</h3><p><strong>问题</strong>：修改一个类实例会影响到所有引用该实例的变量。</p>
<p><strong>解决方案</strong>：如果需要独立的副本，可以实现<code>NSCopying</code>协议或手动创建副本方法。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>: <span class="title class_ inherited__">NSCopying</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">copy</span>(<span class="params">with</span> <span class="params">zone</span>: <span class="type">NSZone</span>? <span class="operator">=</span> <span class="literal">nil</span>) -&gt; <span class="keyword">Any</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Person</span>(name: <span class="keyword">self</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用副本</span></span><br><span class="line"><span class="keyword">let</span> person1 <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> person2 <span class="operator">=</span> person1.copy() <span class="keyword">as!</span> <span class="type">Person</span></span><br><span class="line">person2.name <span class="operator">=</span> <span class="string">&quot;李四&quot;</span> <span class="comment">// 不会影响person1</span></span><br></pre></td></tr></table></figure>

<h3 id="4-属性观察器不触发"><a href="#4-属性观察器不触发" class="headerlink" title="4. 属性观察器不触发"></a>4. 属性观察器不触发</h3><p><strong>问题</strong>：计算属性的setter被调用，但属性观察器没有触发。</p>
<p><strong>解决方案</strong>：属性观察器只对存储属性有效，计算属性可以在setter中直接添加观察逻辑。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> radius: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;半径即将从<span class="subst">\(radius)</span>变为<span class="subst">\(newValue)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> diameter: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> radius <span class="operator">*</span> <span class="number">2</span> &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            <span class="comment">// 手动添加观察逻辑</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;直径即将从<span class="subst">\(diameter)</span>变为<span class="subst">\(newValue)</span>&quot;</span>)</span><br><span class="line">            radius <span class="operator">=</span> newValue <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-内存泄漏"><a href="#5-内存泄漏" class="headerlink" title="5. 内存泄漏"></a>5. 内存泄漏</h3><p><strong>问题</strong>：类实例之间的循环引用导致内存泄漏。</p>
<p><strong>解决方案</strong>：使用<code>weak</code>或<code>unowned</code>关键字打破循环引用。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">weak</span> <span class="keyword">var</span> apartment: <span class="type">Apartment</span>?  <span class="comment">// 使用weak</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apartment</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> number: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> tenant: <span class="type">Person</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">number</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.number <span class="operator">=</span> number</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十一、高阶用法"><a href="#十一、高阶用法" class="headerlink" title="十一、高阶用法"></a>十一、高阶用法</h2><h3 id="1-高级属性技巧"><a href="#1-高级属性技巧" class="headerlink" title="1. 高级属性技巧"></a>1. 高级属性技巧</h3><h4 id="1-1-延迟存储属性"><a href="#1-1-延迟存储属性" class="headerlink" title="1.1 延迟存储属性"></a>1.1 延迟存储属性</h4><p>延迟存储属性在第一次访问时才会计算其初始值，适用于需要大量计算或依赖外部条件的属性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DataManager</span> &#123;</span><br><span class="line">    <span class="comment">// 延迟加载，第一次访问时才会创建</span></span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> largeDataSet: [<span class="type">Int</span>] <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="comment">// 模拟耗时操作</span></span><br><span class="line">        <span class="keyword">var</span> data <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span><span class="number">10000</span> &#123;</span><br><span class="line">            data.append(i)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    &#125;()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> manager <span class="operator">=</span> <span class="type">DataManager</span>()</span><br><span class="line"><span class="comment">// largeDataSet尚未创建</span></span><br><span class="line"><span class="built_in">print</span>(manager.largeDataSet.count) <span class="comment">// 此时才创建并初始化</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-类型属性的高级应用"><a href="#1-2-类型属性的高级应用" class="headerlink" title="1.2 类型属性的高级应用"></a>1.2 类型属性的高级应用</h4><p>类型属性可以用于实现单例模式或共享状态。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> shared <span class="operator">=</span> <span class="type">AppConfig</span>()  <span class="comment">// 单例</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">init</span>() &#123;&#125;  <span class="comment">// 防止外部创建实例</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> apiKey: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> baseURL: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;https://api.example.com&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 类型计算属性</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> isDebug: <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">#if</span> <span class="type">DEBUG</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">#else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">#endif</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用单例</span></span><br><span class="line"><span class="type">AppConfig</span>.shared.apiKey <span class="operator">=</span> <span class="string">&quot;your-api-key&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">AppConfig</span>.shared.baseURL)</span><br><span class="line"><span class="built_in">print</span>(<span class="type">AppConfig</span>.isDebug)  <span class="comment">// 直接访问类型属性</span></span><br></pre></td></tr></table></figure>

<h3 id="2-高级方法技巧"><a href="#2-高级方法技巧" class="headerlink" title="2. 高级方法技巧"></a>2. 高级方法技巧</h3><h4 id="2-1-方法的多重参数标签"><a href="#2-1-方法的多重参数标签" class="headerlink" title="2.1 方法的多重参数标签"></a>2.1 方法的多重参数标签</h4><p>Swift支持为方法参数提供外部标签和内部标签，提高代码的可读性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">add</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="params">to</span> <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a <span class="operator">+</span> b</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">multiply</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="params">by</span> <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a <span class="operator">*</span> b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> calc <span class="operator">=</span> <span class="type">Calculator</span>()</span><br><span class="line">calc.add(<span class="number">5</span>, to: <span class="number">3</span>)  <span class="comment">// 更具可读性</span></span><br><span class="line">calc.multiply(<span class="number">5</span>, by: <span class="number">3</span>)  <span class="comment">// 更具可读性</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-下标方法"><a href="#2-2-下标方法" class="headerlink" title="2.2 下标方法"></a>2.2 下标方法</h4><p>下标方法允许通过<code>instance[key]</code>语法访问实例的元素，类似于数组和字典。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Matrix</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> rows: <span class="type">Int</span>, columns: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> grid: [<span class="type">Double</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">rows</span>: <span class="type">Int</span>, <span class="params">columns</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.rows <span class="operator">=</span> rows</span><br><span class="line">        <span class="keyword">self</span>.columns <span class="operator">=</span> columns</span><br><span class="line">        <span class="keyword">self</span>.grid <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="number">0.0</span>, count: rows <span class="operator">*</span> columns)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 下标方法</span></span><br><span class="line">    <span class="keyword">subscript</span>(<span class="params">row</span>: <span class="type">Int</span>, <span class="params">column</span>: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="built_in">assert</span>(row <span class="operator">&gt;=</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> row <span class="operator">&lt;</span> rows <span class="operator">&amp;&amp;</span> column <span class="operator">&gt;=</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> column <span class="operator">&lt;</span> columns, <span class="string">&quot;索引超出范围&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> grid[row <span class="operator">*</span> columns <span class="operator">+</span> column]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            <span class="built_in">assert</span>(row <span class="operator">&gt;=</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> row <span class="operator">&lt;</span> rows <span class="operator">&amp;&amp;</span> column <span class="operator">&gt;=</span> <span class="number">0</span> <span class="operator">&amp;&amp;</span> column <span class="operator">&lt;</span> columns, <span class="string">&quot;索引超出范围&quot;</span>)</span><br><span class="line">            grid[row <span class="operator">*</span> columns <span class="operator">+</span> column] <span class="operator">=</span> newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用下标访问</span></span><br><span class="line"><span class="keyword">var</span> matrix <span class="operator">=</span> <span class="type">Matrix</span>(rows: <span class="number">2</span>, columns: <span class="number">2</span>)</span><br><span class="line">matrix[<span class="number">0</span>, <span class="number">0</span>] <span class="operator">=</span> <span class="number">1.0</span></span><br><span class="line">matrix[<span class="number">0</span>, <span class="number">1</span>] <span class="operator">=</span> <span class="number">2.0</span></span><br><span class="line">matrix[<span class="number">1</span>, <span class="number">0</span>] <span class="operator">=</span> <span class="number">3.0</span></span><br><span class="line">matrix[<span class="number">1</span>, <span class="number">1</span>] <span class="operator">=</span> <span class="number">4.0</span></span><br><span class="line"><span class="built_in">print</span>(matrix[<span class="number">0</span>, <span class="number">1</span>])  <span class="comment">// 输出：2.0</span></span><br></pre></td></tr></table></figure>

<h3 id="3-高级构造函数技巧"><a href="#3-高级构造函数技巧" class="headerlink" title="3. 高级构造函数技巧"></a>3. 高级构造函数技巧</h3><h4 id="3-1-可失败构造函数"><a href="#3-1-可失败构造函数" class="headerlink" title="3.1 可失败构造函数"></a>3.1 可失败构造函数</h4><p>可失败构造函数允许在条件不满足时返回<code>nil</code>，用于处理初始化可能失败的情况。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Temperature</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> celsius: <span class="type">Double</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 可失败构造函数</span></span><br><span class="line">    <span class="keyword">init?</span>(<span class="params">celsius</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> celsius <span class="operator">&lt;</span> <span class="operator">-</span><span class="number">273.15</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span>  <span class="comment">// 绝对零度以下无效</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.celsius <span class="operator">=</span> celsius</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 从华氏温度转换的可失败构造函数</span></span><br><span class="line">    <span class="keyword">init?</span>(<span class="params">fahrenheit</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> celsius <span class="operator">=</span> (fahrenheit <span class="operator">-</span> <span class="number">32</span>) <span class="operator">*</span> <span class="number">5</span><span class="operator">/</span><span class="number">9</span></span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(celsius: celsius)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用可失败构造函数</span></span><br><span class="line"><span class="keyword">let</span> roomTemp <span class="operator">=</span> <span class="type">Temperature</span>(celsius: <span class="number">25</span>)  <span class="comment">// Optional(Temperature)</span></span><br><span class="line"><span class="keyword">let</span> invalidTemp <span class="operator">=</span> <span class="type">Temperature</span>(celsius: <span class="operator">-</span><span class="number">300</span>)  <span class="comment">// nil</span></span><br><span class="line"><span class="keyword">let</span> hotTemp <span class="operator">=</span> <span class="type">Temperature</span>(fahrenheit: <span class="number">212</span>)  <span class="comment">// Optional(Temperature)</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-必要构造函数"><a href="#3-2-必要构造函数" class="headerlink" title="3.2 必要构造函数"></a>3.2 必要构造函数</h4><p>必要构造函数要求子类必须实现该构造函数，使用<code>required</code>关键字标记。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> wheels: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 必要构造函数</span></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">wheels</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.wheels <span class="operator">=</span> wheels</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span>: <span class="title class_ inherited__">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> brand: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">wheels</span>: <span class="type">Int</span>, <span class="params">brand</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.brand <span class="operator">=</span> brand</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(wheels: wheels)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 子类必须实现必要构造函数</span></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(<span class="params">wheels</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.brand <span class="operator">=</span> <span class="string">&quot;Unknown&quot;</span></span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(wheels: wheels)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-高级继承技巧"><a href="#4-高级继承技巧" class="headerlink" title="4. 高级继承技巧"></a>4. 高级继承技巧</h3><h4 id="4-1-类型检查与转换"><a href="#4-1-类型检查与转换" class="headerlink" title="4.1 类型检查与转换"></a>4.1 类型检查与转换</h4><p>使用<code>is</code>和<code>as</code>操作符进行类型检查和转换，实现多态行为。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">makeSound</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;动物发出声音&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>: <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">makeSound</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;汪汪汪&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">wagTail</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;摇尾巴&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>: <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">makeSound</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;喵喵喵&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型检查与转换</span></span><br><span class="line"><span class="keyword">let</span> animals: [<span class="type">Animal</span>] <span class="operator">=</span> [<span class="type">Dog</span>(), <span class="type">Cat</span>(), <span class="type">Dog</span>()]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> animal <span class="keyword">in</span> animals &#123;</span><br><span class="line">    animal.makeSound()  <span class="comment">// 多态行为</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> animal <span class="keyword">is</span> <span class="type">Dog</span> &#123;</span><br><span class="line">        <span class="comment">// 向下转换</span></span><br><span class="line">        <span class="keyword">let</span> dog <span class="operator">=</span> animal <span class="keyword">as!</span> <span class="type">Dog</span></span><br><span class="line">        dog.wagTail()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 可选绑定转换</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> dog <span class="operator">=</span> animal <span class="keyword">as?</span> <span class="type">Dog</span> &#123;</span><br><span class="line">        dog.wagTail()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-协议与类的结合"><a href="#4-2-协议与类的结合" class="headerlink" title="4.2 协议与类的结合"></a>4.2 协议与类的结合</h4><p>结合协议和类实现更灵活的设计，使用<code>class</code>关键字限制协议只能被类实现。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只能被类实现的协议</span></span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">Vehicle</span>: <span class="title class_ inherited__">AnyObject</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">start</span>()</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">stop</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span>: <span class="title class_ inherited__">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">start</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;汽车启动&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">stop</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;汽车停止&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bike</span>: <span class="title class_ inherited__">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">start</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;自行车开始骑行&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">stop</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;自行车停止&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用协议类型</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">operateVehicle</span>(<span class="keyword">_</span> <span class="params">vehicle</span>: <span class="type">Vehicle</span>) &#123;</span><br><span class="line">    vehicle.start()</span><br><span class="line">    <span class="comment">// 执行操作</span></span><br><span class="line">    vehicle.stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> car <span class="operator">=</span> <span class="type">Car</span>()</span><br><span class="line"><span class="keyword">let</span> bike <span class="operator">=</span> <span class="type">Bike</span>()</span><br><span class="line">operateVehicle(car)</span><br><span class="line">operateVehicle(bike)</span><br></pre></td></tr></table></figure>

<h3 id="5-性能优化策略"><a href="#5-性能优化策略" class="headerlink" title="5. 性能优化策略"></a>5. 性能优化策略</h3><h4 id="5-1-值类型与引用类型的选择"><a href="#5-1-值类型与引用类型的选择" class="headerlink" title="5.1 值类型与引用类型的选择"></a>5.1 值类型与引用类型的选择</h4><ul>
<li><strong>优先使用值类型</strong>（结构体、枚举）：当需要独立副本、数据简单时</li>
<li><strong>使用引用类型</strong>（类）：当需要继承、共享状态、复杂生命周期管理时</li>
</ul>
<h4 id="5-2-避免不必要的属性计算"><a href="#5-2-避免不必要的属性计算" class="headerlink" title="5.2 避免不必要的属性计算"></a>5.2 避免不必要的属性计算</h4><ul>
<li>使用延迟存储属性避免初始化时的昂贵计算</li>
<li>对频繁访问的计算属性考虑缓存结果</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ComplexObject</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> rawData: [<span class="type">Int</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 缓存计算结果</span></span><br><span class="line">    <span class="keyword">lazy</span> <span class="keyword">var</span> processedData: [<span class="type">Int</span>] <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="comment">// 耗时的处理操作</span></span><br><span class="line">        <span class="keyword">return</span> rawData.map &#123; <span class="variable">$0</span> <span class="operator">*</span> <span class="number">2</span> &#125;</span><br><span class="line">    &#125;()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-内存管理优化"><a href="#5-3-内存管理优化" class="headerlink" title="5.3 内存管理优化"></a>5.3 内存管理优化</h4><ul>
<li>使用<code>weak</code>或<code>unowned</code>引用避免循环引用</li>
<li>及时清理不再需要的强引用</li>
<li>对于大对象，考虑使用<code>autoreleasepool</code>控制内存峰值</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">processLargeData</span>() &#123;</span><br><span class="line">    autoreleasepool &#123;</span><br><span class="line">        <span class="comment">// 创建和使用大对象</span></span><br><span class="line">        <span class="keyword">let</span> largeArray <span class="operator">=</span> <span class="type">Array</span>(repeating: <span class="string">&quot;data&quot;</span>, count: <span class="number">1000000</span>)</span><br><span class="line">        <span class="comment">// 处理largeArray</span></span><br><span class="line">    &#125; <span class="comment">// largeArray在此处被释放</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-最佳实践指南"><a href="#6-最佳实践指南" class="headerlink" title="6. 最佳实践指南"></a>6. 最佳实践指南</h3><ol>
<li><strong>遵循Swift API设计指南</strong>：使用清晰的命名和参数标签</li>
<li><strong>优先使用结构体</strong>：减少引用类型带来的复杂性</li>
<li><strong>合理使用访问控制</strong>：使用<code>private</code>、<code>internal</code>、<code>public</code>等关键字限制访问权限</li>
<li><strong>避免过度使用继承</strong>：考虑使用协议和组合代替继承</li>
<li><strong>实现<code>Equatable</code>和<code>Hashable</code>协议</strong>：为自定义类型提供比较和哈希功能</li>
<li><strong>使用<code>defer</code>语句</strong>：确保资源在合适的时机被清理</li>
<li><strong>编写文档注释</strong>：使用<code>///</code>为类、属性和方法添加文档</li>
</ol>
<h2 id="十二、实践练习"><a href="#十二、实践练习" class="headerlink" title="十二、实践练习"></a>十二、实践练习</h2><h3 id="1-类与结构体基础练习"><a href="#1-类与结构体基础练习" class="headerlink" title="1. 类与结构体基础练习"></a>1. 类与结构体基础练习</h3><h4 id="练习1：创建结构体"><a href="#练习1：创建结构体" class="headerlink" title="练习1：创建结构体"></a>练习1：创建结构体</h4><p>创建一个<code>Rectangle</code>结构体，包含<code>width</code>和<code>height</code>属性，以及计算面积的<code>area</code>方法。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> width: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">var</span> height: <span class="type">Double</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> area: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> width <span class="operator">*</span> height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">let</span> rect <span class="operator">=</span> <span class="type">Rectangle</span>(width: <span class="number">5</span>, height: <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;矩形面积：<span class="subst">\(rect.area)</span>&quot;</span>) <span class="comment">// 50.0</span></span><br></pre></td></tr></table></figure>

<h4 id="练习2：创建类"><a href="#练习2：创建类" class="headerlink" title="练习2：创建类"></a>练习2：创建类</h4><p>创建一个<code>Car</code>类，包含<code>brand</code>、<code>model</code>和<code>year</code>属性，以及<code>displayInfo</code>方法。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> brand: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> model: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> year: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">brand</span>: <span class="type">String</span>, <span class="params">model</span>: <span class="type">String</span>, <span class="params">year</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.brand <span class="operator">=</span> brand</span><br><span class="line">        <span class="keyword">self</span>.model <span class="operator">=</span> model</span><br><span class="line">        <span class="keyword">self</span>.year <span class="operator">=</span> year</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">displayInfo</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(year)</span> <span class="subst">\(brand)</span> <span class="subst">\(model)</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">let</span> myCar <span class="operator">=</span> <span class="type">Car</span>(brand: <span class="string">&quot;Toyota&quot;</span>, model: <span class="string">&quot;Corolla&quot;</span>, year: <span class="number">2023</span>)</span><br><span class="line"><span class="built_in">print</span>(myCar.displayInfo()) <span class="comment">// 2023 Toyota Corolla</span></span><br></pre></td></tr></table></figure>

<h3 id="2-属性与方法练习"><a href="#2-属性与方法练习" class="headerlink" title="2. 属性与方法练习"></a>2. 属性与方法练习</h3><h4 id="练习3：属性观察器"><a href="#练习3：属性观察器" class="headerlink" title="练习3：属性观察器"></a>练习3：属性观察器</h4><p>创建一个<code>BankAccount</code>结构体，包含<code>balance</code>属性，使用属性观察器在余额变化时打印信息。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">BankAccount</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> balance: <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;余额即将从<span class="subst">\(balance)</span>变为<span class="subst">\(newValue)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;余额已更新为<span class="subst">\(balance)</span>&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">deposit</span>(<span class="params">amount</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        balance <span class="operator">+=</span> amount</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mutating</span> <span class="keyword">func</span> <span class="title function_">withdraw</span>(<span class="params">amount</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> amount <span class="operator">&lt;=</span> balance &#123;</span><br><span class="line">            balance <span class="operator">-=</span> amount</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;余额不足&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> account <span class="operator">=</span> <span class="type">BankAccount</span>(balance: <span class="number">1000</span>)</span><br><span class="line">account.deposit(amount: <span class="number">500</span>)   <span class="comment">// 余额即将从1000.0变为1500.0，余额已更新为1500.0</span></span><br><span class="line">account.withdraw(amount: <span class="number">200</span>)  <span class="comment">// 余额即将从1500.0变为1300.0，余额已更新为1300.0</span></span><br></pre></td></tr></table></figure>

<h4 id="练习4：类型方法"><a href="#练习4：类型方法" class="headerlink" title="练习4：类型方法"></a>练习4：类型方法</h4><p>创建一个<code>Math</code>类，包含静态方法<code>add</code>、<code>subtract</code>、<code>multiply</code>和<code>divide</code>。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Math</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">add</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Double</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Double</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a <span class="operator">+</span> b</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">subtract</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Double</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Double</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a <span class="operator">-</span> b</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">multiply</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Double</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Double</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a <span class="operator">*</span> b</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">divide</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Double</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Double</span>) -&gt; <span class="type">Double</span>? &#123;</span><br><span class="line">        <span class="keyword">guard</span> b <span class="operator">!=</span> <span class="number">0</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a <span class="operator">/</span> b</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.add(<span class="number">5</span>, <span class="number">3</span>))           <span class="comment">// 8.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.subtract(<span class="number">10</span>, <span class="number">4</span>))     <span class="comment">// 6.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.multiply(<span class="number">6</span>, <span class="number">7</span>))      <span class="comment">// 42.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Math</span>.divide(<span class="number">10</span>, <span class="number">2</span>) <span class="operator">??</span> <span class="number">0</span>)  <span class="comment">// 5.0</span></span><br></pre></td></tr></table></figure>

<h3 id="3-继承与多态练习"><a href="#3-继承与多态练习" class="headerlink" title="3. 继承与多态练习"></a>3. 继承与多态练习</h3><h4 id="练习5：继承"><a href="#练习5：继承" class="headerlink" title="练习5：继承"></a>练习5：继承</h4><p>创建一个<code>Animal</code>基类和<code>Dog</code>、<code>Cat</code>子类，实现方法重写。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">makeSound</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;动物发出声音&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>: <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">makeSound</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;汪汪汪&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">wagTail</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;摇尾巴&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>: <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">makeSound</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;喵喵喵&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">purr</span>() &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;咕噜咕噜&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">let</span> dog <span class="operator">=</span> <span class="type">Dog</span>(name: <span class="string">&quot;旺财&quot;</span>)</span><br><span class="line">dog.makeSound()  <span class="comment">// 汪汪汪</span></span><br><span class="line">dog.wagTail()    <span class="comment">// 摇尾巴</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cat <span class="operator">=</span> <span class="type">Cat</span>(name: <span class="string">&quot;咪咪&quot;</span>)</span><br><span class="line">cat.makeSound()  <span class="comment">// 喵喵喵</span></span><br><span class="line">cat.purr()       <span class="comment">// 咕噜咕噜</span></span><br></pre></td></tr></table></figure>

<h4 id="练习6：多态"><a href="#练习6：多态" class="headerlink" title="练习6：多态"></a>练习6：多态</h4><p>创建一个<code>Shape</code>基类和<code>Circle</code>、<code>Square</code>子类，使用多态计算不同形状的面积。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">calculateArea</span>() -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span>: <span class="title class_ inherited__">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> radius: <span class="type">Double</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">radius</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.radius <span class="operator">=</span> radius</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">calculateArea</span>() -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Double</span>.pi <span class="operator">*</span> radius <span class="operator">*</span> radius</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span>: <span class="title class_ inherited__">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> side: <span class="type">Double</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">side</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.side <span class="operator">=</span> side</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">calculateArea</span>() -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> side <span class="operator">*</span> side</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">let</span> shapes: [<span class="type">Shape</span>] <span class="operator">=</span> [<span class="type">Circle</span>(radius: <span class="number">5</span>), <span class="type">Square</span>(side: <span class="number">10</span>)]</span><br><span class="line"><span class="keyword">for</span> shape <span class="keyword">in</span> shapes &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;面积：<span class="subst">\(shape.calculateArea())</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：</span></span><br><span class="line"><span class="comment">// 面积：78.53981633974483</span></span><br><span class="line"><span class="comment">// 面积：100.0</span></span><br></pre></td></tr></table></figure>

<h2 id="十三、总结"><a href="#十三、总结" class="headerlink" title="十三、总结"></a>十三、总结</h2><p>在这篇学习日记中，我们深入探讨了Swift的面向对象编程特性，特别是类和结构体：</p>
<ol>
<li><p><strong>类与结构体的定义</strong>：使用<code>class</code>和<code>struct</code>关键字定义类和结构体，它们都可以包含属性和方法</p>
</li>
<li><p><strong>类与结构体的区别</strong>：结构体是值类型，类是引用类型；类支持继承，结构体不支持；类支持类型转换和析构函数，结构体不支持</p>
</li>
<li><p><strong>属性</strong>：包括存储属性、计算属性和属性观察器，用于访问和修改类或结构体的数据</p>
</li>
<li><p><strong>方法</strong>：包括实例方法和类型方法，用于定义类或结构体的行为</p>
</li>
<li><p><strong>构造函数</strong>：用于创建类或结构体实例，类支持指定构造函数和便利构造函数</p>
</li>
<li><p><strong>继承</strong>：子类可以继承父类的属性和方法，并可以重写它们</p>
</li>
<li><p><strong>析构函数</strong>：用于在类实例被销毁前执行清理工作</p>
</li>
</ol>
<p>通过补充的内容机制与知识点总结、遇到的问题及解决方案和高阶用法章节，我们更加全面地理解了Swift面向对象编程的核心概念和高级应用。类和结构体是Swift面向对象编程的基础，掌握它们对于开发高质量的Swift应用程序至关重要。在下一篇学习日记中，我们将继续学习Swift的面向对象编程特性，包括枚举和协议。</p>

  </div>
  <!--文末结束语-->
  
    <div style="text-align:center;color: #ccc;font-size:24px;"> --- 本文结束 <i class="iconfont icon-heartbeat" style="font-size:24px;"></i> The End --- </div>
  
  <!--页脚广告-->
  
  <div class="mdui-divider"></div>
  
  <nav>
    
      <a rel="prev" class="post-nav-item mdui-float-left" href="/ios.github.io/2025/12/08/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89/">
        <i class="iconfont icon-angle-left"></i>
        <span>swift学习日记(六)</span>
      </a>
    
    
      <a rel="next" class="post-nav-item mdui-float-right" href="/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/">
        <span>swift学习日记(四)</span>
        <i class="iconfont icon-angle-right"></i>
      </a>
    
  </nav>
</article>




  <div class="toc-button"  style="z-index: 100;">
    <button class="mdui-fab mdui-ripple mdui-color-teal" mdui-menu="{target: '#toc'}"><i class="iconfont icon-list"></i></button>
    <ul class="mdui-menu" id="toc">
      <li class="mdui-menu-item">
        <a href="/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/" id="toc-header" class="mdui-ripple">文章目录</a>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%EF%BC%88%E7%B1%BB%E4%B8%8E%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">Swift学习日记（五）：面向对象编程（类与结构体）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">一、引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%B1%BB%E4%B8%8E%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.</span> <span class="toc-text">二、类与结构体的定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 结构体的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%B1%BB%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 类的定义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%B1%BB%E4%B8%8E%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.3.</span> <span class="toc-text">三、类与结构体的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%80%BC%E7%B1%BB%E5%9E%8B-vs-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 值类型 vs 引用类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 类型转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. 析构函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0"><span class="toc-number">1.3.5.</span> <span class="toc-text">5. 引用计数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.</span> <span class="toc-text">四、属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AD%98%E5%82%A8%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 存储属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 计算属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B1%9E%E6%80%A7%E8%A7%82%E5%AF%9F%E5%99%A8"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 属性观察器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. 类型属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%96%B9%E6%B3%95"><span class="toc-number">1.5.</span> <span class="toc-text">五、方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 实例方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%B1%BB%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. 类型方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.6.</span> <span class="toc-text">六、构造函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. 结构体的构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. 类的构造函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E7%BB%A7%E6%89%BF"><span class="toc-number">1.7.</span> <span class="toc-text">七、继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E7%BB%A7%E6%89%BF"><span class="toc-number">1.7.1.</span> <span class="toc-text">1. 基本继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%87%8D%E5%86%99%E5%B1%9E%E6%80%A7"><span class="toc-number">1.7.2.</span> <span class="toc-text">2. 重写属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%98%B2%E6%AD%A2%E9%87%8D%E5%86%99"><span class="toc-number">1.7.3.</span> <span class="toc-text">3. 防止重写</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.</span> <span class="toc-text">八、析构函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%86%85%E5%AE%B9%E6%9C%BA%E5%88%B6%E4%B8%8E%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">1.9.</span> <span class="toc-text">九、内容机制与知识点总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Swift%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="toc-number">1.9.1.</span> <span class="toc-text">1. Swift面向对象编程的设计原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">1.9.2.</span> <span class="toc-text">2. 核心知识点总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.10.</span> <span class="toc-text">十、遇到的问题及解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95%E6%97%A0%E6%B3%95%E4%BF%AE%E6%94%B9%E5%B1%9E%E6%80%A7"><span class="toc-number">1.10.1.</span> <span class="toc-text">1. 结构体实例方法无法修改属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AD%90%E7%B1%BB%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7"><span class="toc-number">1.10.2.</span> <span class="toc-text">2. 子类构造函数未初始化所有属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%84%8F%E5%A4%96%E4%BF%AE%E6%94%B9"><span class="toc-number">1.10.3.</span> <span class="toc-text">3. 引用类型的意外修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B1%9E%E6%80%A7%E8%A7%82%E5%AF%9F%E5%99%A8%E4%B8%8D%E8%A7%A6%E5%8F%91"><span class="toc-number">1.10.4.</span> <span class="toc-text">4. 属性观察器不触发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F"><span class="toc-number">1.10.5.</span> <span class="toc-text">5. 内存泄漏</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E9%AB%98%E9%98%B6%E7%94%A8%E6%B3%95"><span class="toc-number">1.11.</span> <span class="toc-text">十一、高阶用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%AB%98%E7%BA%A7%E5%B1%9E%E6%80%A7%E6%8A%80%E5%B7%A7"><span class="toc-number">1.11.1.</span> <span class="toc-text">1. 高级属性技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%BB%B6%E8%BF%9F%E5%AD%98%E5%82%A8%E5%B1%9E%E6%80%A7"><span class="toc-number">1.11.1.1.</span> <span class="toc-text">1.1 延迟存储属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7%E7%9A%84%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8"><span class="toc-number">1.11.1.2.</span> <span class="toc-text">1.2 类型属性的高级应用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%AB%98%E7%BA%A7%E6%96%B9%E6%B3%95%E6%8A%80%E5%B7%A7"><span class="toc-number">1.11.2.</span> <span class="toc-text">2. 高级方法技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%96%B9%E6%B3%95%E7%9A%84%E5%A4%9A%E9%87%8D%E5%8F%82%E6%95%B0%E6%A0%87%E7%AD%BE"><span class="toc-number">1.11.2.1.</span> <span class="toc-text">2.1 方法的多重参数标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E4%B8%8B%E6%A0%87%E6%96%B9%E6%B3%95"><span class="toc-number">1.11.2.2.</span> <span class="toc-text">2.2 下标方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%AB%98%E7%BA%A7%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%8A%80%E5%B7%A7"><span class="toc-number">1.11.3.</span> <span class="toc-text">3. 高级构造函数技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%8F%AF%E5%A4%B1%E8%B4%A5%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.11.3.1.</span> <span class="toc-text">3.1 可失败构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E5%BF%85%E8%A6%81%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">1.11.3.2.</span> <span class="toc-text">3.2 必要构造函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%AB%98%E7%BA%A7%E7%BB%A7%E6%89%BF%E6%8A%80%E5%B7%A7"><span class="toc-number">1.11.4.</span> <span class="toc-text">4. 高级继承技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E4%B8%8E%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.11.4.1.</span> <span class="toc-text">4.1 类型检查与转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%8D%8F%E8%AE%AE%E4%B8%8E%E7%B1%BB%E7%9A%84%E7%BB%93%E5%90%88"><span class="toc-number">1.11.4.2.</span> <span class="toc-text">4.2 协议与类的结合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">1.11.5.</span> <span class="toc-text">5. 性能优化策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">1.11.5.1.</span> <span class="toc-text">5.1 值类型与引用类型的选择</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E9%81%BF%E5%85%8D%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%A1%E7%AE%97"><span class="toc-number">1.11.5.2.</span> <span class="toc-text">5.2 避免不必要的属性计算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E4%BC%98%E5%8C%96"><span class="toc-number">1.11.5.3.</span> <span class="toc-text">5.3 内存管理优化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97"><span class="toc-number">1.11.6.</span> <span class="toc-text">6. 最佳实践指南</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E5%AE%9E%E8%B7%B5%E7%BB%83%E4%B9%A0"><span class="toc-number">1.12.</span> <span class="toc-text">十二、实践练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%B1%BB%E4%B8%8E%E7%BB%93%E6%9E%84%E4%BD%93%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0"><span class="toc-number">1.12.1.</span> <span class="toc-text">1. 类与结构体基础练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A01%EF%BC%9A%E5%88%9B%E5%BB%BA%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">1.12.1.1.</span> <span class="toc-text">练习1：创建结构体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A02%EF%BC%9A%E5%88%9B%E5%BB%BA%E7%B1%BB"><span class="toc-number">1.12.1.2.</span> <span class="toc-text">练习2：创建类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B1%9E%E6%80%A7%E4%B8%8E%E6%96%B9%E6%B3%95%E7%BB%83%E4%B9%A0"><span class="toc-number">1.12.2.</span> <span class="toc-text">2. 属性与方法练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A03%EF%BC%9A%E5%B1%9E%E6%80%A7%E8%A7%82%E5%AF%9F%E5%99%A8"><span class="toc-number">1.12.2.1.</span> <span class="toc-text">练习3：属性观察器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A04%EF%BC%9A%E7%B1%BB%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-number">1.12.2.2.</span> <span class="toc-text">练习4：类型方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%A4%9A%E6%80%81%E7%BB%83%E4%B9%A0"><span class="toc-number">1.12.3.</span> <span class="toc-text">3. 继承与多态练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A05%EF%BC%9A%E7%BB%A7%E6%89%BF"><span class="toc-number">1.12.3.1.</span> <span class="toc-text">练习5：继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A06%EF%BC%9A%E5%A4%9A%E6%80%81"><span class="toc-number">1.12.3.2.</span> <span class="toc-text">练习6：多态</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">1.13.</span> <span class="toc-text">十三、总结</span></a></li></ol></li></ol>
      </li>
    </ul>
  </div>



    <div id="comment" class="mdui-card mdui-p-a-2 mdui-m-b-5">
      <div class="mdui-tab" mdui-tab>
        
          <a href="#comment-tab0" class="mdui-ripple">gitalk</a>
        
          <a href="#comment-tab1" class="mdui-ripple">livere</a>
        
      </div>
      
        <div id="comment-tab0" class="mdui-p-a-2">
          <div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/js-md5@0.7.3/src/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
    clientID: '',
    clientSecret: '',
    repo: '',
    owner: '',
    admin: [''],
    id:  md5(location.pathname) ,
    distractionFreeMode: 'true',
  });
  gitalk.render('gitalk-container');
</script>
        </div>
      
        <div id="comment-tab1" class="mdui-p-a-2">
          <div id="lv-container" data-id="city" data-uid="">
  <script type="text/javascript">
    (function (d, s) {
      var j, e = d.getElementsByTagName(s)[0];
      if (typeof LivereTower === 'function') { return; }
      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;
      e.parentNode.insertBefore(j, e);
    })(document, 'script');
  </script>
  <noscript>Please enable JavaScript to view the comments powered by LiveRe.</noscript>
</div>
        </div>
      
    </div>

  </main>
  <footer id="footer" class="mdui-text-center mdui-m-t-5 mdui-p-b-2 mdui-p-t-4 mdui-color-theme">
  <div class="mdui-container">
    <div class="mdui-row">
      
      <span>
        &copy; 2025 - 2025 
        
        猪会飞
      </span>
    </div>
    <div class="mdui-row">
      
        <span>Theme: <a href="https://github.com/kb1000fx/hexo-theme-meadow" rel="noopener" target="_blank">Meadow</a></span>
      
    </div>
    <div class="mdui-row">
      
    </div>
 </div>
</footer>
  
  <button id="gotop" class="mdui-fab mdui-fab-fixed mdui-fab-hide mdui-ripple mdui-color-teal" style="z-index:100;"><i class="iconfont icon-arrowup"></i></button>
  
  




    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({
        startOnLoad: true,
        theme: "default"
    });</script>




    
<script src="/ios.github.io/js/mdui.min.v1.0.0.js"></script>




<script src="/ios.github.io/js/meadow.js"></script>

</body>
</html >