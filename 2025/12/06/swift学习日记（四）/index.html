<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Regular.woff2" as="font">
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Bold.woff2" as="font">
    
    
    
        <link rel="shortcut icon" href="/ios.github.io/./././images/userImage.JPG">
    

    
    
        
<link rel="stylesheet" href="/ios.github.io/css/mdui.min.v1.0.0.css">

    
    
<link rel="stylesheet" href="/ios.github.io/css/main.css">
<link rel="stylesheet" href="/ios.github.io/css/iconfont.css">


    
    

    
        <script data-ad-client="ca-" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    












          


    
    
    <title>
        
            swift学习日记(四) | 猪会飞的博客
        
    </title>
    
    
<meta name="generator" content="Hexo 8.1.1"></head>
<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-teal mdui-theme-accent-blue">
  
  <header class="mdui-appbar mdui-appbar-fixed">
  <div id="toolbar" class="mdui-toolbar mdui-color-theme">
    <button class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar', swipe: true}"><i class="iconfont icon-menu"></i></button>
    <a href="/ios.github.io/" class="mdui-typo-headline">猪会飞的博客</a>
    <a href="/ios.github.io/" class="header-subtitle mdui-typo-headline"></a>
    <div class="mdui-toolbar-spacer"></div>
    <button class="mdui-btn mdui-btn-icon" mdui-dialog="{target: '#search'}" mdui-tooltip="{content: 'search'}"><i class="iconfont icon-search"></i></button>
  </div>
</header>

<div class="mdui-dialog" id="search">
  
    <div class="search-form">
      <input type="search" class="search-form-input" placeholder="请输入关键字" onfocus="listenSearchFunc()">
    </div>
    <div class="search-result" data-resource="/ios.github.io/search.xml"></div>
  
</div>

  <aside id="sidebar" class="mdui-drawer">
    <div class="mdui-tab" mdui-tab>
        <a href="#sidebar-tab1" id="sidebartab" class="mdui-ripple mdui-tab-active">站点概览</a>
        <a href="#sidebar-tab2" id="sidebartab" class="mdui-ripple">关于</a>
    </div>

    
    <div id="sidebar-tab1" class="mdui-p-a-1">
        <div class="mdui-list">
            
                
                <a href="/ios.github.io/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-home"></i>
                    </div>
                    <div class="mdui-list-item-content">主页</div>
                </a>
            
                
                <a href="/ios.github.io/archives/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-archive"></i>
                    </div>
                    <div class="mdui-list-item-content">归档</div>
                </a>
            
                
                <a href="/ios.github.io/tags/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-bookmark"></i>
                    </div>
                    <div class="mdui-list-item-content">标签</div>
                </a>
            
                
                <a href="/ios.github.io/about/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-user"></i>
                    </div>
                    <div class="mdui-list-item-content">关于</div>
                </a>
            
            <div class="mdui-list-item mdui-ripple">
                <div class="mdui-list-item-icon">
                    <i class="iconfont icon-moon"></i>
                </div>
                <div class="mdui-list-item-content">夜间模式</div>
                <label class="mdui-switch" id="darkmode">
                  <input type="checkbox" id="nightmode_switch"/>
                  <i class="mdui-switch-icon"></i>
                </label>
            </div>           
        </div>
    </div>

    
    <div id="sidebar-tab2" class="mdui-p-a-1">
        <div class="sidebar-overview">
            <div class="sidebar-avatar">
                
                    <img src="/ios.github.io/./././images/userImage.JPG"/>
                
            </div>
            <div class="sidebar-author-name">猪会飞</div>
            <div class="sidebar-description"></div>
        </div>
        <div class="sidebar-links">
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-mail"></i></span>
                    <a href="mailto:2839029331@qq.com" class="mdui-chip-title">E-Mail</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a target="_blank" rel="noopener" href="https://github.com/YCCIT123" class="mdui-chip-title">GitHub</a>
                </div>
            
        </div>
        <ul class="mdui-list" mdui-collapse="{accordion: true}">
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-link"></i>
                    </div>
                    <div class="mdui-list-item-content">友情链接</div>
                    <div class="mdui-collapse-item-arrow">
                        <i class="mdui-list-item-icon iconfont icon-angle-down"></i>
                    </div>
                </div>
                <ul id="linksList" class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    
                        <a target="_blank" rel="noopener" href="https://garybear.cn/hexo-theme-meadow/" class="mdui-list-item mdui-ripple">
                            Meadow说明文档
                        </a>
                    
                </ul>
            </li>
        </ul>
    </div>

    <div class="mdui-divider"></div>
    
    
</aside>
  
  <main id="main-contain" class="mdui-container mdui-m-t-5">
    <article id="article" class="mdui-card mdui-p-b-2 mdui-m-b-5">
  <header class="mdui-card-media">
    
    
      <div class="post-header"> 
  <a class="post-header-title" href="/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/">swift学习日记(四)</a>
  <div class="post-header-meta">
    <span>
      <span class="iconfont icon-calendar"></span>
      发布于:&nbsp;2025-12-06
    </span>
    <span>
      <span class="iconfont icon-calendar-check"></span>
      更新于:&nbsp;2025-12-04
    </span>
    <span>
      <span class="iconfont icon-folder"></span>
      分类于:&nbsp;
    </span>
    
  </div>
</div>   
    



    
    
    <div class="mdui-card-menu">
    
      <button class="mdui-btn mdui-btn-icon mdui-text-color-teal" mdui-menu="{target: '#share_menu', align: 'right'}"><i class="iconfont icon-share"></i></button>
      <ul class="mdui-menu" id="share_menu">
        <li class="mdui-menu-item">
          <a href="http://service.weibo.com/share/share.php?appkey=&title=swift学习日记(四)&url=https://yccit123.github.io/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/&pic=https://yccit123.github.io/ios.github.io/ios.github.io/./././images/userImage.JPG&searchPic=false&style=simple" target="_blank" class="mdui-ripple">分享到 Weibo</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://twitter.com/intent/tweet?text=swift学习日记(四)&url=https://yccit123.github.io/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/&via=猪会飞" target="_blank" class="mdui-ripple">分享到 Twitter</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://yccit123.github.io/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/" target="_blank" class="mdui-ripple">分享到 Facebook</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://plus.google.com/share?url=https://yccit123.github.io/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/" target="_blank" class="mdui-ripple">分享到 Google+</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://yccit123.github.io/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/&title=swift学习日记(四)" target="_blank" class="mdui-ripple">分享到 LinkedIn</a>
        </li>
        <li class="mdui-menu-item">
          <a href="http://connect.qq.com/widget/shareqq/index.html?site=猪会飞的博客&title=swift学习日记(四)&summary=&pics=https://yccit123.github.io/ios.github.io/ios.github.io/./././images/userImage.JPG&url=https://yccit123.github.io/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/" target="_blank" class="mdui-ripple">分享到 QQ</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://telegram.me/share/url?url=https://yccit123.github.io/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/&text=swift学习日记(四)" target="_blank" class="mdui-ripple">分享到 Telegram</a>
        </li>
      </ul>
    
  </div>
  </header>
  
  
  
  
  <div class="post-tags">
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /ios.github.io/tags/swift/ >swift</a>
      </i>
    
  </div>

  
  <div class="mdui-card-content mdui-typo mdui-p-x-4">
    <h1 id="Swift学习日记（四）：函数与闭包"><a href="#Swift学习日记（四）：函数与闭包" class="headerlink" title="Swift学习日记（四）：函数与闭包"></a>Swift学习日记（四）：函数与闭包</h1><h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>函数和闭包是Swift编程语言中的核心概念，它们允许我们将代码组织成可重用的模块。在上一篇学习日记中，我们已经了解了Swift的控制流语句。在这篇日记中，我们将深入探讨Swift函数的定义、调用、参数类型、返回值以及闭包的各种用法。</p>
<h2 id="二、函数的定义与调用"><a href="#二、函数的定义与调用" class="headerlink" title="二、函数的定义与调用"></a>二、函数的定义与调用</h2><p>函数是执行特定任务的代码块，它可以接受输入参数并返回输出结果。</p>
<h3 id="1-函数的基本定义"><a href="#1-函数的基本定义" class="headerlink" title="1. 函数的基本定义"></a>1. 函数的基本定义</h3><p>Swift中函数的基本定义格式如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">函数名</span>(<span class="params">参数名1</span>: 参数类型<span class="number">1</span>, <span class="params">参数名2</span>: 参数类型<span class="number">2</span>, <span class="operator">...</span>) -&gt; 返回值类型 &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">    <span class="keyword">return</span> 返回值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个简单的加法函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">add</span>(<span class="params">a</span>: <span class="type">Int</span>, <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a <span class="operator">+</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> add(a: <span class="number">3</span>, b: <span class="number">5</span>) <span class="comment">// result = 8</span></span><br></pre></td></tr></table></figure>

<h3 id="2-无参数函数"><a href="#2-无参数函数" class="headerlink" title="2. 无参数函数"></a>2. 无参数函数</h3><p>函数可以不接受任何参数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sayHello</span>() -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, World!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> sayHello() <span class="comment">// greeting = &quot;Hello, World!&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-无返回值函数"><a href="#3-无返回值函数" class="headerlink" title="3. 无返回值函数"></a>3. 无返回值函数</h3><p>函数可以不返回任何值，此时返回值类型可以省略，或者使用<code>Void</code>（相当于空元组<code>()</code>）：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1：省略返回值类型</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">printHello</span>() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2：使用Void</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">printHello2</span>() -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式3：使用空元组</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">printHello3</span>() -&gt; () &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用无返回值函数</span></span><br><span class="line">printHello()</span><br><span class="line">printHello2()</span><br><span class="line">printHello3()</span><br></pre></td></tr></table></figure>

<h3 id="4-多返回值函数"><a href="#4-多返回值函数" class="headerlink" title="4. 多返回值函数"></a>4. 多返回值函数</h3><p>函数可以返回多个值，使用元组类型：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">calculate</span>(<span class="params">a</span>: <span class="type">Int</span>, <span class="params">b</span>: <span class="type">Int</span>) -&gt; (sum: <span class="type">Int</span>, difference: <span class="type">Int</span>, product: <span class="type">Int</span>, quotient: <span class="type">Int</span>?) &#123;</span><br><span class="line">    <span class="keyword">let</span> sum <span class="operator">=</span> a <span class="operator">+</span> b</span><br><span class="line">    <span class="keyword">let</span> difference <span class="operator">=</span> a <span class="operator">-</span> b</span><br><span class="line">    <span class="keyword">let</span> product <span class="operator">=</span> a <span class="operator">*</span> b</span><br><span class="line">    <span class="keyword">let</span> quotient <span class="operator">=</span> b <span class="operator">!=</span> <span class="number">0</span> <span class="operator">?</span> a <span class="operator">/</span> b : <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">return</span> (sum, difference, product, quotient)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> calculate(a: <span class="number">10</span>, b: <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;和：<span class="subst">\(result.sum)</span>&quot;</span>) <span class="comment">// 输出：和：13</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;差：<span class="subst">\(result.difference)</span>&quot;</span>) <span class="comment">// 输出：差：7</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;积：<span class="subst">\(result.product)</span>&quot;</span>) <span class="comment">// 输出：积：30</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;商：<span class="subst">\(result.quotient <span class="operator">??</span> <span class="number">0</span>)</span>&quot;</span>) <span class="comment">// 输出：商：3</span></span><br></pre></td></tr></table></figure>

<h2 id="三、函数参数"><a href="#三、函数参数" class="headerlink" title="三、函数参数"></a>三、函数参数</h2><p>Swift提供了多种参数类型，使函数更加灵活和强大。</p>
<h3 id="1-外部参数名"><a href="#1-外部参数名" class="headerlink" title="1. 外部参数名"></a>1. 外部参数名</h3><p>外部参数名用于提高函数调用的可读性，它出现在函数调用时，而内部参数名用于函数体内部：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义带有外部参数名的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="params">to</span> <span class="params">name</span>: <span class="type">String</span>, <span class="params">with</span> <span class="params">message</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(message)</span>, <span class="subst">\(name)</span>!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，使用外部参数名</span></span><br><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> greet(to: <span class="string">&quot;张三&quot;</span>, with: <span class="string">&quot;你好&quot;</span>) <span class="comment">// greeting = &quot;你好, 张三!&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-参数标签"><a href="#2-参数标签" class="headerlink" title="2. 参数标签"></a>2. 参数标签</h3><p>参数标签是Swift 3.0引入的概念，用于替代外部参数名，它的语法更简洁：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义带有参数标签的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="keyword">_</span> <span class="params">name</span>: <span class="type">String</span>, <span class="params">with</span> <span class="params">message</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(message)</span>, <span class="subst">\(name)</span>!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，_表示省略参数标签</span></span><br><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> greet(<span class="string">&quot;张三&quot;</span>, with: <span class="string">&quot;你好&quot;</span>) <span class="comment">// greeting = &quot;你好, 张三!&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-默认参数值"><a href="#3-默认参数值" class="headerlink" title="3. 默认参数值"></a>3. 默认参数值</h3><p>函数参数可以设置默认值，当调用函数时可以省略这些参数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义带有默认参数值的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="keyword">_</span> <span class="params">name</span>: <span class="type">String</span>, <span class="params">with</span> <span class="params">message</span>: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(message)</span>, <span class="subst">\(name)</span>!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，使用默认参数值</span></span><br><span class="line"><span class="keyword">let</span> greeting1 <span class="operator">=</span> greet(<span class="string">&quot;张三&quot;</span>) <span class="comment">// greeting1 = &quot;Hello, 张三!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，自定义参数值</span></span><br><span class="line"><span class="keyword">let</span> greeting2 <span class="operator">=</span> greet(<span class="string">&quot;张三&quot;</span>, with: <span class="string">&quot;你好&quot;</span>) <span class="comment">// greeting2 = &quot;你好, 张三!&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-可变参数"><a href="#4-可变参数" class="headerlink" title="4. 可变参数"></a>4. 可变参数</h3><p>可变参数允许函数接受任意数量的特定类型参数，使用<code>...</code>表示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义带有可变参数的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">sum</span>(<span class="keyword">_</span> <span class="params">numbers</span>: <span class="type">Int</span>...) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> total <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">        total <span class="operator">+=</span> number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，传递任意数量的参数</span></span><br><span class="line"><span class="keyword">let</span> result1 <span class="operator">=</span> sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// result1 = 6</span></span><br><span class="line"><span class="keyword">let</span> result2 <span class="operator">=</span> sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">// result2 = 15</span></span><br><span class="line"><span class="keyword">let</span> result3 <span class="operator">=</span> sum() <span class="comment">// result3 = 0</span></span><br></pre></td></tr></table></figure>

<h3 id="5-输入输出参数"><a href="#5-输入输出参数" class="headerlink" title="5. 输入输出参数"></a>5. 输入输出参数</h3><p>输入输出参数允许函数修改传递给它的参数值，并将修改后的值反映到函数外部。使用<code>inout</code>关键字表示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义带有输入输出参数的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">swap</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="keyword">inout</span> <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="keyword">inout</span> <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp <span class="operator">=</span> a</span><br><span class="line">    a <span class="operator">=</span> b</span><br><span class="line">    b <span class="operator">=</span> temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，传递变量的引用</span></span><br><span class="line"><span class="keyword">var</span> x <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> y <span class="operator">=</span> <span class="number">20</span></span><br><span class="line"><span class="built_in">swap</span>(<span class="operator">&amp;</span>x, <span class="operator">&amp;</span>y) <span class="comment">// x = 20, y = 10</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：输入输出参数不能有默认值，也不能是可变参数。</p>
<h2 id="四、函数类型"><a href="#四、函数类型" class="headerlink" title="四、函数类型"></a>四、函数类型</h2><p>每个函数都有一个特定的类型，由参数类型和返回值类型组成。</p>
<h3 id="1-函数类型的定义"><a href="#1-函数类型的定义" class="headerlink" title="1. 函数类型的定义"></a>1. 函数类型的定义</h3><p>函数类型的定义格式为：<code>(参数类型1, 参数类型2, ...) -&gt; 返回值类型</code></p>
<p>例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个变量，类型为函数类型</span></span><br><span class="line"><span class="keyword">var</span> mathFunction: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将函数赋值给变量</span></span><br><span class="line">mathFunction <span class="operator">=</span> add <span class="comment">// add是之前定义的加法函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用变量调用函数</span></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> mathFunction(<span class="number">3</span>, <span class="number">5</span>) <span class="comment">// result = 8</span></span><br></pre></td></tr></table></figure>

<h3 id="2-函数类型作为参数"><a href="#2-函数类型作为参数" class="headerlink" title="2. 函数类型作为参数"></a>2. 函数类型作为参数</h3><p>函数类型可以作为另一个函数的参数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个接受函数类型参数的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">apply</span>(<span class="keyword">_</span> <span class="params">function</span>: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span>, <span class="params">to</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="params">and</span> <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> function(a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，传递add函数作为参数</span></span><br><span class="line"><span class="keyword">let</span> sumResult <span class="operator">=</span> apply(add, to: <span class="number">3</span>, and: <span class="number">5</span>) <span class="comment">// sumResult = 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个乘法函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">multiply</span>(<span class="params">a</span>: <span class="type">Int</span>, <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a <span class="operator">*</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，传递multiply函数作为参数</span></span><br><span class="line"><span class="keyword">let</span> multiplyResult <span class="operator">=</span> apply(multiply, to: <span class="number">3</span>, and: <span class="number">5</span>) <span class="comment">// multiplyResult = 15</span></span><br></pre></td></tr></table></figure>

<h3 id="3-函数类型作为返回值"><a href="#3-函数类型作为返回值" class="headerlink" title="3. 函数类型作为返回值"></a>3. 函数类型作为返回值</h3><p>函数类型可以作为另一个函数的返回值：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个返回函数类型的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">chooseOperation</span>(<span class="keyword">_</span> <span class="params">operation</span>: <span class="type">String</span>) -&gt; (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> operation &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> add</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> multiply</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> add</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，获取返回的函数</span></span><br><span class="line"><span class="keyword">let</span> operation <span class="operator">=</span> chooseOperation(<span class="string">&quot;*&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用返回的函数</span></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> operation(<span class="number">3</span>, <span class="number">5</span>) <span class="comment">// result = 15</span></span><br></pre></td></tr></table></figure>

<h2 id="五、嵌套函数"><a href="#五、嵌套函数" class="headerlink" title="五、嵌套函数"></a>五、嵌套函数</h2><p>函数可以嵌套在其他函数内部：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">calculate</span>(<span class="keyword">_</span> <span class="params">operation</span>: <span class="type">String</span>, <span class="params">a</span>: <span class="type">Int</span>, <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="comment">// 嵌套的加法函数</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">add</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a <span class="operator">+</span> b</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 嵌套的乘法函数</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">multiply</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a <span class="operator">*</span> b</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 根据操作类型调用不同的嵌套函数</span></span><br><span class="line">    <span class="keyword">switch</span> operation &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> add(a, b)</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> multiply(a, b)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> add(a, b)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sumResult <span class="operator">=</span> calculate(<span class="string">&quot;+&quot;</span>, a: <span class="number">3</span>, b: <span class="number">5</span>) <span class="comment">// sumResult = 8</span></span><br><span class="line"><span class="keyword">let</span> multiplyResult <span class="operator">=</span> calculate(<span class="string">&quot;*&quot;</span>, a: <span class="number">3</span>, b: <span class="number">5</span>) <span class="comment">// multiplyResult = 15</span></span><br></pre></td></tr></table></figure>

<p>嵌套函数只在外部函数内部可见，但可以被外部函数返回，从而在外部函数外部使用。</p>
<h2 id="六、闭包"><a href="#六、闭包" class="headerlink" title="六、闭包"></a>六、闭包</h2><p>闭包是自包含的函数代码块，可以在代码中被传递和使用。闭包类似于其他语言中的匿名函数或 lambda 表达式。</p>
<h3 id="1-闭包的基本语法"><a href="#1-闭包的基本语法" class="headerlink" title="1. 闭包的基本语法"></a>1. 闭包的基本语法</h3><p>闭包的基本语法格式如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; (参数名1: 参数类型<span class="number">1</span>, 参数名2: 参数类型<span class="number">2</span>, <span class="operator">...</span>) -&gt; 返回值类型 <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// 闭包体</span></span><br><span class="line">    <span class="keyword">return</span> 返回值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个闭包</span></span><br><span class="line"><span class="keyword">let</span> addClosure <span class="operator">=</span> &#123; (a: <span class="type">Int</span>, b: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> a <span class="operator">+</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用闭包</span></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> addClosure(<span class="number">3</span>, <span class="number">5</span>) <span class="comment">// result = 8</span></span><br></pre></td></tr></table></figure>

<h3 id="2-闭包的类型推断"><a href="#2-闭包的类型推断" class="headerlink" title="2. 闭包的类型推断"></a>2. 闭包的类型推断</h3><p>闭包可以根据上下文进行类型推断，简化语法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类型推断后可以省略参数类型和返回值类型</span></span><br><span class="line"><span class="keyword">let</span> addClosure: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="operator">=</span> &#123; a, b <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">return</span> a <span class="operator">+</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单行闭包可以省略return关键字</span></span><br><span class="line"><span class="keyword">let</span> addClosure2: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="operator">=</span> &#123; a, b <span class="keyword">in</span> a <span class="operator">+</span> b &#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-参数名称缩写"><a href="#3-参数名称缩写" class="headerlink" title="3. 参数名称缩写"></a>3. 参数名称缩写</h3><p>Swift提供了参数名称缩写（$0, $1, $2等），可以进一步简化闭包语法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用参数名称缩写</span></span><br><span class="line"><span class="keyword">let</span> addClosure: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="operator">=</span> &#123; <span class="variable">$0</span> <span class="operator">+</span> <span class="variable">$1</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// $0表示第一个参数，$1表示第二个参数</span></span><br><span class="line"><span class="keyword">let</span> subtractClosure: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="operator">=</span> &#123; <span class="variable">$0</span> <span class="operator">-</span> <span class="variable">$1</span> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-尾随闭包"><a href="#4-尾随闭包" class="headerlink" title="4. 尾随闭包"></a>4. 尾随闭包</h3><p>如果函数的最后一个参数是闭包，可以将闭包写在函数调用的括号外面，这种语法称为尾随闭包：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个接受闭包参数的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">calculate</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="type">Int</span>, <span class="params">operation</span>: (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> operation(a, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用尾随闭包调用函数</span></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> calculate(<span class="number">3</span>, <span class="number">5</span>) &#123; <span class="variable">$0</span> <span class="operator">+</span> <span class="variable">$1</span> &#125; <span class="comment">// result = 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果闭包是函数的唯一参数，可以省略函数调用的括号</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">performOperation</span>(<span class="params">operation</span>: () -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    operation()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数，省略括号</span></span><br><span class="line">performOperation &#123; </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行操作&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-捕获值"><a href="#5-捕获值" class="headerlink" title="5. 捕获值"></a>5. 捕获值</h3><p>闭包可以捕获和存储其所在上下文中的常量和变量，即使这些常量和变量在原始上下文中已经不存在：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">makeIncrementer</span>(<span class="params">incrementAmount</span>: <span class="type">Int</span>) -&gt; () -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> total <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 闭包捕获了total和incrementAmount变量</span></span><br><span class="line">    <span class="keyword">let</span> incrementer: () -&gt; <span class="type">Int</span> <span class="operator">=</span> &#123; </span><br><span class="line">        total <span class="operator">+=</span> incrementAmount</span><br><span class="line">        <span class="keyword">return</span> total</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> incrementer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个增量器，每次增加2</span></span><br><span class="line"><span class="keyword">let</span> incrementByTwo <span class="operator">=</span> makeIncrementer(incrementAmount: <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(incrementByTwo()) <span class="comment">// 输出：2</span></span><br><span class="line"><span class="built_in">print</span>(incrementByTwo()) <span class="comment">// 输出：4</span></span><br><span class="line"><span class="built_in">print</span>(incrementByTwo()) <span class="comment">// 输出：6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建另一个增量器，每次增加3</span></span><br><span class="line"><span class="keyword">let</span> incrementByThree <span class="operator">=</span> makeIncrementer(incrementAmount: <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(incrementByThree()) <span class="comment">// 输出：3</span></span><br><span class="line"><span class="built_in">print</span>(incrementByTwo()) <span class="comment">// 输出：8（继续使用之前的total值）</span></span><br></pre></td></tr></table></figure>

<h3 id="6-闭包的内存管理"><a href="#6-闭包的内存管理" class="headerlink" title="6. 闭包的内存管理"></a>6. 闭包的内存管理</h3><p>当闭包捕获了引用类型的变量时，可能会导致循环引用。Swift提供了<code>weak</code>和<code>unowned</code>关键字来解决这个问题：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> greeting: (() -&gt; <span class="type">String</span>)<span class="operator">?</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(name)</span>被销毁了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个Person实例</span></span><br><span class="line"><span class="keyword">var</span> person: <span class="type">Person</span>? <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包捕获了person实例的强引用，导致循环引用</span></span><br><span class="line">person<span class="operator">?</span>.greeting <span class="operator">=</span> &#123; [<span class="keyword">weak</span> person] <span class="keyword">in</span> <span class="comment">// 使用weak关键字</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> strongPerson <span class="operator">=</span> person <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="string">&quot;Person已被销毁&quot;</span> &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(strongPerson.name)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者使用unowned关键字</span></span><br><span class="line">person<span class="operator">?</span>.greeting <span class="operator">=</span> &#123; [<span class="keyword">unowned</span> person] <span class="keyword">in</span> <span class="comment">// 使用unowned关键字</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(person<span class="operator">!</span>.name)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用闭包</span></span><br><span class="line"><span class="built_in">print</span>(person<span class="operator">?</span>.greeting<span class="operator">?</span>() <span class="operator">??</span> <span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 释放person实例</span></span><br><span class="line">person <span class="operator">=</span> <span class="literal">nil</span> <span class="comment">// 输出：张三被销毁了</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：</p>
<ul>
<li><code>weak</code>关键字表示闭包对捕获的实例是弱引用，实例可能为nil，所以需要使用可选绑定</li>
<li><code>unowned</code>关键字表示闭包对捕获的实例是无主引用，实例不会为nil，但如果实例被销毁后继续使用，会导致运行时错误</li>
</ul>
<h2 id="七、内容机制与知识点总结"><a href="#七、内容机制与知识点总结" class="headerlink" title="七、内容机制与知识点总结"></a>七、内容机制与知识点总结</h2><h3 id="1-内容机制"><a href="#1-内容机制" class="headerlink" title="1. 内容机制"></a>1. 内容机制</h3><p>Swift的函数和闭包系统设计遵循以下核心原则：</p>
<ul>
<li><strong>模块化</strong>：将代码组织成可重用的模块，提高代码的可维护性</li>
<li><strong>灵活性</strong>：支持多种参数类型和返回值类型，适应不同的编程场景</li>
<li><strong>功能性</strong>：支持函数式编程范式，使代码更加简洁和表达力强</li>
<li><strong>安全性</strong>：通过类型安全和捕获值机制，避免潜在的运行时错误</li>
</ul>
<h3 id="2-知识点总结"><a href="#2-知识点总结" class="headerlink" title="2. 知识点总结"></a>2. 知识点总结</h3><table>
<thead>
<tr>
<th>主题</th>
<th>核心知识点</th>
</tr>
</thead>
<tbody><tr>
<td>函数定义</td>
<td>基本定义、无参数函数、无返回值函数、多返回值函数</td>
</tr>
<tr>
<td>函数参数</td>
<td>外部参数名、参数标签、默认参数值、可变参数、输入输出参数</td>
</tr>
<tr>
<td>函数类型</td>
<td>函数类型定义、作为参数、作为返回值</td>
</tr>
<tr>
<td>嵌套函数</td>
<td>嵌套定义、作用域、访问外部函数变量</td>
</tr>
<tr>
<td>闭包基础</td>
<td>基本语法、类型推断、参数名称缩写</td>
</tr>
<tr>
<td>闭包高级特性</td>
<td>尾随闭包、捕获值、内存管理(weak&#x2F;unowned)</td>
</tr>
</tbody></table>
<h2 id="八、遇到的问题及解决方案"><a href="#八、遇到的问题及解决方案" class="headerlink" title="八、遇到的问题及解决方案"></a>八、遇到的问题及解决方案</h2><h3 id="1-函数参数标签与外部参数名混淆"><a href="#1-函数参数标签与外部参数名混淆" class="headerlink" title="1. 函数参数标签与外部参数名混淆"></a>1. 函数参数标签与外部参数名混淆</h3><p><strong>问题</strong>：在Swift 3.0之前使用外部参数名，升级到Swift 3.0及以后版本时，代码编译失败</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Swift 2.x的外部参数名语法</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="params">to</span> <span class="params">name</span>: <span class="type">String</span>, <span class="params">with</span> <span class="params">message</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(message)</span>, <span class="subst">\(name)</span>!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Swift 3.0+需要使用参数标签语法</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="keyword">_</span> <span class="params">name</span>: <span class="type">String</span>, <span class="params">with</span> <span class="params">message</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(message)</span>, <span class="subst">\(name)</span>!&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解决方案</strong>：使用下划线<code>_</code>作为第一个参数的标签，使函数调用时可以省略第一个参数的标签</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Swift 3.0+的正确语法</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="keyword">_</span> <span class="params">name</span>: <span class="type">String</span>, <span class="params">with</span> <span class="params">message</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(message)</span>, <span class="subst">\(name)</span>!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方式</span></span><br><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> greet(<span class="string">&quot;张三&quot;</span>, with: <span class="string">&quot;你好&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-闭包导致的循环引用"><a href="#2-闭包导致的循环引用" class="headerlink" title="2. 闭包导致的循环引用"></a>2. 闭包导致的循环引用</h3><p><strong>问题</strong>：当闭包捕获了self或其他引用类型变量时，可能导致循环引用，使对象无法被释放</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> greeting: (() -&gt; <span class="type">String</span>)<span class="operator">?</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\(name)</span>被销毁了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person: <span class="type">Person</span>? <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;张三&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导致循环引用</span></span><br><span class="line">person<span class="operator">?</span>.greeting <span class="operator">=</span> &#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(<span class="keyword">self</span>.name)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person <span class="operator">=</span> <span class="literal">nil</span> <span class="comment">// 不会调用deinit，因为存在循环引用</span></span><br></pre></td></tr></table></figure>

<p><strong>解决方案</strong>：使用weak或unowned关键字打破循环引用</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用weak关键字</span></span><br><span class="line">person<span class="operator">?</span>.greeting <span class="operator">=</span> &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span> </span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> strongSelf <span class="operator">=</span> <span class="keyword">self</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="string">&quot;Person已被销毁&quot;</span> &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(strongSelf.name)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者使用unowned关键字</span></span><br><span class="line">person<span class="operator">?</span>.greeting <span class="operator">=</span> &#123; [<span class="keyword">unowned</span> <span class="keyword">self</span>] <span class="keyword">in</span> </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你好，我是<span class="subst">\(<span class="keyword">self</span>.name)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person <span class="operator">=</span> <span class="literal">nil</span> <span class="comment">// 现在会调用deinit</span></span><br></pre></td></tr></table></figure>

<h3 id="3-可变参数与输入输出参数的混淆"><a href="#3-可变参数与输入输出参数的混淆" class="headerlink" title="3. 可变参数与输入输出参数的混淆"></a>3. 可变参数与输入输出参数的混淆</h3><p><strong>问题</strong>：试图将可变参数声明为inout参数，导致编译错误</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误的语法</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">modifyNumbers</span>(<span class="keyword">_</span> <span class="params">numbers</span>: <span class="keyword">inout</span> <span class="type">Int</span>...) &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>numbers.count &#123;</span><br><span class="line">        numbers[i] <span class="operator">*=</span> <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解决方案</strong>：使用数组代替可变参数作为inout参数</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正确的语法</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">modifyNumbers</span>(<span class="keyword">_</span> <span class="params">numbers</span>: <span class="keyword">inout</span> [<span class="type">Int</span>]) &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>numbers.count &#123;</span><br><span class="line">        numbers[i] <span class="operator">*=</span> <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用方式</span></span><br><span class="line"><span class="keyword">var</span> numbers <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">modifyNumbers(<span class="operator">&amp;</span>numbers) <span class="comment">// numbers现在是[2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>

<h3 id="4-函数类型作为返回值时的类型推断问题"><a href="#4-函数类型作为返回值时的类型推断问题" class="headerlink" title="4. 函数类型作为返回值时的类型推断问题"></a>4. 函数类型作为返回值时的类型推断问题</h3><p><strong>问题</strong>：当函数返回另一个函数时，类型推断可能不准确，导致编译错误</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编译错误：无法推断返回类型</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">chooseOperation</span>(<span class="keyword">_</span> <span class="params">operation</span>: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> operation &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; (a: <span class="type">Int</span>, b: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span> a <span class="operator">+</span> b &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; (a: <span class="type">Int</span>, b: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span> a <span class="operator">*</span> b &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; (a: <span class="type">Int</span>, b: <span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span> a <span class="operator">+</span> b &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解决方案</strong>：显式声明函数的返回类型</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 显式声明返回类型</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">chooseOperation</span>(<span class="keyword">_</span> <span class="params">operation</span>: <span class="type">String</span>) -&gt; (<span class="type">Int</span>, <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> operation &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="variable">$0</span> <span class="operator">+</span> <span class="variable">$1</span> &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="variable">$0</span> <span class="operator">*</span> <span class="variable">$1</span> &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="variable">$0</span> <span class="operator">+</span> <span class="variable">$1</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-闭包捕获值的时机问题"><a href="#5-闭包捕获值的时机问题" class="headerlink" title="5. 闭包捕获值的时机问题"></a>5. 闭包捕获值的时机问题</h3><p><strong>问题</strong>：闭包捕获值的时机与预期不符，导致结果错误</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">var</span> closures: [() -&gt; <span class="type">Int</span>] <span class="operator">=</span> []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">    closures.append &#123; number &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预期输出：1, 2, 3, 4, 5</span></span><br><span class="line"><span class="comment">// 实际输出：5, 5, 5, 5, 5</span></span><br><span class="line"><span class="keyword">for</span> closure <span class="keyword">in</span> closures &#123;</span><br><span class="line">    <span class="built_in">print</span>(closure())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解决方案</strong>：在循环内部创建一个局部变量，捕获该局部变量而不是循环变量</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">var</span> closures: [() -&gt; <span class="type">Int</span>] <span class="operator">=</span> []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">    <span class="keyword">let</span> localNumber <span class="operator">=</span> number <span class="comment">// 创建局部变量</span></span><br><span class="line">    closures.append &#123; localNumber &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 现在输出：1, 2, 3, 4, 5</span></span><br><span class="line"><span class="keyword">for</span> closure <span class="keyword">in</span> closures &#123;</span><br><span class="line">    <span class="built_in">print</span>(closure())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Swift 3.0+的另一种解决方案：使用闭包参数</span></span><br><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> numbers &#123;</span><br><span class="line">    closures.append &#123; [number] <span class="keyword">in</span> number &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="九、高阶用法"><a href="#九、高阶用法" class="headerlink" title="九、高阶用法"></a>九、高阶用法</h2><h3 id="1-高级函数技巧"><a href="#1-高级函数技巧" class="headerlink" title="1. 高级函数技巧"></a>1. 高级函数技巧</h3><h4 id="柯里化函数"><a href="#柯里化函数" class="headerlink" title="柯里化函数"></a>柯里化函数</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义柯里化函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">add</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="type">Int</span>) -&gt; (<span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; b <span class="keyword">in</span> a <span class="operator">+</span> b &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用柯里化函数</span></span><br><span class="line"><span class="keyword">let</span> add5 <span class="operator">=</span> add(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> add5(<span class="number">3</span>) <span class="comment">// result = 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 链式调用</span></span><br><span class="line"><span class="keyword">let</span> add10 <span class="operator">=</span> add(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> result2 <span class="operator">=</span> add10(add5(<span class="number">3</span>)) <span class="comment">// result2 = 18</span></span><br></pre></td></tr></table></figure>

<h4 id="泛型函数"><a href="#泛型函数" class="headerlink" title="泛型函数"></a>泛型函数</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义泛型函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">swapValues</span>&lt;<span class="type">T</span>&gt;(<span class="keyword">_</span> <span class="params">a</span>: <span class="keyword">inout</span> <span class="type">T</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="keyword">inout</span> <span class="type">T</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp <span class="operator">=</span> a</span><br><span class="line">    a <span class="operator">=</span> b</span><br><span class="line">    b <span class="operator">=</span> temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用泛型函数</span></span><br><span class="line"><span class="keyword">var</span> x <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> y <span class="operator">=</span> <span class="number">20</span></span><br><span class="line">swapValues(<span class="operator">&amp;</span>x, <span class="operator">&amp;</span>y) <span class="comment">// x = 20, y = 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str1 <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">var</span> str2 <span class="operator">=</span> <span class="string">&quot;World&quot;</span></span><br><span class="line">swapValues(<span class="operator">&amp;</span>str1, <span class="operator">&amp;</span>str2) <span class="comment">// str1 = &quot;World&quot;, str2 = &quot;Hello&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-高级闭包技巧"><a href="#2-高级闭包技巧" class="headerlink" title="2. 高级闭包技巧"></a>2. 高级闭包技巧</h3><h4 id="逃逸闭包与非逃逸闭包"><a href="#逃逸闭包与非逃逸闭包" class="headerlink" title="逃逸闭包与非逃逸闭包"></a>逃逸闭包与非逃逸闭包</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 非逃逸闭包（默认）：闭包在函数返回前执行完成</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">performNonEscaping</span>(<span class="params">closure</span>: () -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    closure()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 逃逸闭包：闭包可能在函数返回后执行</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">performEscaping</span>(<span class="params">closure</span>: <span class="keyword">@escaping</span> () -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    <span class="type">DispatchQueue</span>.main.async &#123; <span class="comment">// 将闭包传递到函数外部</span></span><br><span class="line">        closure()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用逃逸闭包需要显式捕获self</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> completionHandlers: [() -&gt; <span class="type">Void</span>] <span class="operator">=</span> []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">addCompletionHandler</span>() &#123;</span><br><span class="line">        performEscaping &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;闭包执行&quot;</span>)</span><br><span class="line">            <span class="keyword">self</span><span class="operator">?</span>.completionHandlers.append &#123; <span class="built_in">print</span>(<span class="string">&quot;新的闭包&quot;</span>) &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="自动闭包"><a href="#自动闭包" class="headerlink" title="自动闭包"></a>自动闭包</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义接受自动闭包的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">evaluate</span>(<span class="params">condition</span>: <span class="keyword">@autoclosure</span> () -&gt; <span class="type">Bool</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;评估条件&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> condition()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用自动闭包</span></span><br><span class="line"><span class="keyword">let</span> x <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> y <span class="operator">=</span> <span class="number">20</span></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> evaluate(condition: x <span class="operator">&gt;</span> y) <span class="comment">// 自动将x &gt; y包装成闭包</span></span><br></pre></td></tr></table></figure>

<h3 id="3-函数式编程模式"><a href="#3-函数式编程模式" class="headerlink" title="3. 函数式编程模式"></a>3. 函数式编程模式</h3><h4 id="函数组合"><a href="#函数组合" class="headerlink" title="函数组合"></a>函数组合</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义函数组合运算符</span></span><br><span class="line"><span class="keyword">infix</span> <span class="keyword">operator</span> <span class="title">&gt;&gt;&gt;</span>: <span class="type">AdditionPrecedence</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">&gt;&gt;&gt;</span> &lt;<span class="type">A</span>, <span class="type">B</span>, <span class="type">C</span>&gt;(<span class="params">f</span>: <span class="keyword">@escaping</span> (<span class="type">A</span>) -&gt; <span class="type">B</span>, <span class="params">g</span>: <span class="keyword">@escaping</span> (<span class="type">B</span>) -&gt; <span class="type">C</span>) -&gt; (<span class="type">A</span>) -&gt; <span class="type">C</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; g(f(<span class="variable">$0</span>)) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义两个函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">double</span>(<span class="keyword">_</span> <span class="params">x</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123; x <span class="operator">*</span> <span class="number">2</span> &#125;</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">square</span>(<span class="keyword">_</span> <span class="params">x</span>: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123; x <span class="operator">*</span> x &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组合函数</span></span><br><span class="line"><span class="keyword">let</span> doubleThenSquare <span class="operator">=</span> double <span class="operator">&gt;&gt;&gt;</span> square</span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> doubleThenSquare(<span class="number">3</span>) <span class="comment">// 先double得到6，再square得到36</span></span><br></pre></td></tr></table></figure>

<h4 id="部分应用"><a href="#部分应用" class="headerlink" title="部分应用"></a>部分应用</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个接受多个参数的函数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">greet</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">message</span>: <span class="type">String</span>, <span class="params">punctuation</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(message)</span>, <span class="subst">\(name)</span><span class="subst">\(punctuation)</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 部分应用：固定部分参数</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">greetWithHello</span>(<span class="params">name</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> greet(name: name, message: <span class="string">&quot;Hello&quot;</span>, punctuation: <span class="string">&quot;!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用部分应用的函数</span></span><br><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> greetWithHello(name: <span class="string">&quot;张三&quot;</span>) <span class="comment">// &quot;Hello, 张三!&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-性能优化策略"><a href="#4-性能优化策略" class="headerlink" title="4. 性能优化策略"></a>4. 性能优化策略</h3><h4 id="闭包内存优化"><a href="#闭包内存优化" class="headerlink" title="闭包内存优化"></a>闭包内存优化</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用逃逸闭包时，避免强引用循环</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DataManager</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> data: [<span class="type">Int</span>] <span class="operator">=</span> []</span><br><span class="line">    <span class="keyword">var</span> completion: (([<span class="type">Int</span>]) -&gt; <span class="type">Void</span>)<span class="operator">?</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">fetchData</span>(<span class="params">completion</span>: <span class="keyword">@escaping</span> ([<span class="type">Int</span>]) -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.completion <span class="operator">=</span> completion</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 模拟网络请求</span></span><br><span class="line">        <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">            <span class="comment">// 获取数据</span></span><br><span class="line">            <span class="keyword">let</span> newData <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">            </span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                <span class="keyword">self</span>.data <span class="operator">=</span> newData</span><br><span class="line">                completion(newData)</span><br><span class="line">                <span class="keyword">self</span>.completion <span class="operator">=</span> <span class="literal">nil</span> <span class="comment">// 释放闭包引用</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数类型优化"><a href="#函数类型优化" class="headerlink" title="函数类型优化"></a>函数类型优化</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用内联函数减少函数调用开销</span></span><br><span class="line"><span class="meta">@inline</span>(__always) <span class="keyword">func</span> <span class="title function_">isEven</span>(<span class="keyword">_</span> <span class="params">number</span>: <span class="type">Int</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> number <span class="operator">%</span> <span class="number">2</span> <span class="operator">==</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用isEven函数</span></span><br><span class="line"><span class="keyword">let</span> numbers <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">let</span> evenNumbers <span class="operator">=</span> numbers.filter &#123; isEven(<span class="variable">$0</span>) &#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-最佳实践"><a href="#5-最佳实践" class="headerlink" title="5. 最佳实践"></a>5. 最佳实践</h3><h4 id="函数设计"><a href="#函数设计" class="headerlink" title="函数设计"></a>函数设计</h4><ul>
<li><strong>单一职责</strong>：每个函数只负责一个特定的任务</li>
<li><strong>清晰命名</strong>：函数名应该清晰地表达其功能和参数</li>
<li><strong>合理参数</strong>：避免过多的参数，如果参数超过4个，考虑使用结构体或元组</li>
<li><strong>类型安全</strong>：利用Swift的类型系统确保函数的安全性</li>
</ul>
<h4 id="闭包使用"><a href="#闭包使用" class="headerlink" title="闭包使用"></a>闭包使用</h4><ul>
<li><strong>简洁性</strong>：使用类型推断、参数名称缩写和尾随闭包简化语法</li>
<li><strong>内存管理</strong>：在捕获self或其他引用类型时，使用weak或unowned避免循环引用</li>
<li><strong>性能考虑</strong>：在处理大型数据集时，注意闭包的性能影响</li>
<li><strong>可读性</strong>：避免过于复杂的闭包，如果闭包体超过3行，考虑使用命名函数</li>
</ul>
<h4 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h4><ul>
<li><strong>适度使用</strong>：根据场景选择合适的编程范式，不要为了函数式而函数式</li>
<li><strong>组合优先</strong>：通过函数组合创建复杂功能，提高代码的可维护性</li>
<li><strong>不可变性</strong>：尽量使用不可变值，减少副作用</li>
</ul>
<h2 id="十、实践练习"><a href="#十、实践练习" class="headerlink" title="十、实践练习"></a>十、实践练习</h2><h3 id="1-函数基础练习"><a href="#1-函数基础练习" class="headerlink" title="1. 函数基础练习"></a>1. 函数基础练习</h3><h4 id="练习1：温度转换函数"><a href="#练习1：温度转换函数" class="headerlink" title="练习1：温度转换函数"></a>练习1：温度转换函数</h4><p>创建一个函数，将摄氏度转换为华氏度。公式：华氏度 &#x3D; 摄氏度 × 9&#x2F;5 + 32</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">celsiusToFahrenheit</span>(<span class="keyword">_</span> <span class="params">celsius</span>: <span class="type">Double</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> celsius <span class="operator">*</span> <span class="number">9</span><span class="operator">/</span><span class="number">5</span> <span class="operator">+</span> <span class="number">32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="built_in">print</span>(celsiusToFahrenheit(<span class="number">0</span>))   <span class="comment">// 32.0</span></span><br><span class="line"><span class="built_in">print</span>(celsiusToFahrenheit(<span class="number">100</span>)) <span class="comment">// 212.0</span></span><br></pre></td></tr></table></figure>

<h4 id="练习2：计算数组总和"><a href="#练习2：计算数组总和" class="headerlink" title="练习2：计算数组总和"></a>练习2：计算数组总和</h4><p>创建一个函数，计算整数数组的总和。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">sumArray</span>(<span class="keyword">_</span> <span class="params">array</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> total <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> array &#123;</span><br><span class="line">        total <span class="operator">+=</span> number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者使用reduce</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">sumArrayReduce</span>(<span class="keyword">_</span> <span class="params">array</span>: [<span class="type">Int</span>]) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> array.reduce(<span class="number">0</span>, <span class="operator">+</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="built_in">print</span>(sumArray([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]))         <span class="comment">// 15</span></span><br><span class="line"><span class="built_in">print</span>(sumArrayReduce([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]))    <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>

<h3 id="2-函数参数练习"><a href="#2-函数参数练习" class="headerlink" title="2. 函数参数练习"></a>2. 函数参数练习</h3><h4 id="练习3：带有默认参数的函数"><a href="#练习3：带有默认参数的函数" class="headerlink" title="练习3：带有默认参数的函数"></a>练习3：带有默认参数的函数</h4><p>创建一个函数，计算商品的折扣价格，默认折扣为10%。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">calculateDiscountPrice</span>(<span class="params">originalPrice</span>: <span class="type">Double</span>, <span class="params">discountPercentage</span>: <span class="type">Double</span> <span class="operator">=</span> <span class="number">10</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> discount <span class="operator">=</span> originalPrice <span class="operator">*</span> (discountPercentage <span class="operator">/</span> <span class="number">100</span>)</span><br><span class="line">    <span class="keyword">return</span> originalPrice <span class="operator">-</span> discount</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="built_in">print</span>(calculateDiscountPrice(originalPrice: <span class="number">100</span>))                  <span class="comment">// 90.0</span></span><br><span class="line"><span class="built_in">print</span>(calculateDiscountPrice(originalPrice: <span class="number">100</span>, discountPercentage: <span class="number">20</span>)) <span class="comment">// 80.0</span></span><br></pre></td></tr></table></figure>

<h4 id="练习4：输入输出参数"><a href="#练习4：输入输出参数" class="headerlink" title="练习4：输入输出参数"></a>练习4：输入输出参数</h4><p>创建一个函数，使用输入输出参数交换两个整数的值。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">swapValues</span>(<span class="keyword">_</span> <span class="params">a</span>: <span class="keyword">inout</span> <span class="type">Int</span>, <span class="keyword">_</span> <span class="params">b</span>: <span class="keyword">inout</span> <span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> temp <span class="operator">=</span> a</span><br><span class="line">    a <span class="operator">=</span> b</span><br><span class="line">    b <span class="operator">=</span> temp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> x <span class="operator">=</span> <span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> y <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">swapValues(<span class="operator">&amp;</span>x, <span class="operator">&amp;</span>y)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;x = <span class="subst">\(x)</span>, y = <span class="subst">\(y)</span>&quot;</span>) <span class="comment">// x = 10, y = 5</span></span><br></pre></td></tr></table></figure>

<h3 id="3-闭包练习"><a href="#3-闭包练习" class="headerlink" title="3. 闭包练习"></a>3. 闭包练习</h3><h4 id="练习5：使用闭包排序"><a href="#练习5：使用闭包排序" class="headerlink" title="练习5：使用闭包排序"></a>练习5：使用闭包排序</h4><p>创建一个字符串数组，然后使用闭包按字符串长度排序。</p>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits <span class="operator">=</span> [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>, <span class="string">&quot;date&quot;</span>, <span class="string">&quot;elderberry&quot;</span>]</span><br><span class="line">fruits.sort &#123; <span class="variable">$0</span>.count <span class="operator">&lt;</span> <span class="variable">$1</span>.count &#125;</span><br><span class="line"><span class="built_in">print</span>(fruits) <span class="comment">// [&quot;date&quot;, &quot;apple&quot;, &quot;cherry&quot;, &quot;banana&quot;, &quot;elderberry&quot;]</span></span><br></pre></td></tr></table></figure>

<h4 id="练习6：高阶函数应用"><a href="#练习6：高阶函数应用" class="headerlink" title="练习6：高阶函数应用"></a>练习6：高阶函数应用</h4><p>使用map、filter和reduce实现以下功能：</p>
<ol>
<li>将整数数组中的每个元素平方</li>
<li>过滤出平方后的偶数</li>
<li>计算过滤后数组的总和</li>
</ol>
<p><strong>代码示例：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请在这里实现你的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>答案：</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result <span class="operator">=</span> numbers</span><br><span class="line">    .map &#123; <span class="variable">$0</span> <span class="operator">*</span> <span class="variable">$0</span> &#125;      <span class="comment">// [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span></span><br><span class="line">    .filter &#123; <span class="variable">$0</span> <span class="operator">%</span> <span class="number">2</span> <span class="operator">==</span> <span class="number">0</span> &#125; <span class="comment">// [4, 16, 36, 64, 100]</span></span><br><span class="line">    .reduce(<span class="number">0</span>, <span class="operator">+</span>)         <span class="comment">// 220</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment">// 220</span></span><br></pre></td></tr></table></figure>

<h2 id="十一、总结"><a href="#十一、总结" class="headerlink" title="十一、总结"></a>十一、总结</h2><p>在这篇学习日记中，我们深入探讨了Swift的函数和闭包：</p>
<ol>
<li><p><strong>函数的定义与调用</strong>：包括基本定义、无参数函数、无返回值函数和多返回值函数</p>
</li>
<li><p><strong>函数参数</strong>：包括外部参数名、参数标签、默认参数值、可变参数和输入输出参数</p>
</li>
<li><p><strong>函数类型</strong>：函数可以作为变量、参数或返回值使用</p>
</li>
<li><p><strong>嵌套函数</strong>：函数可以嵌套在其他函数内部</p>
</li>
<li><p><strong>闭包</strong>：包括闭包的基本语法、类型推断、参数名称缩写、尾随闭包和值捕获</p>
</li>
<li><p><strong>高级用法</strong>：包括柯里化函数、泛型函数、逃逸闭包、自动闭包、函数组合和部分应用</p>
</li>
</ol>
<p>函数和闭包是Swift编程中的核心概念，它们使代码更加模块化、可重用和灵活。在下一篇学习日记中，我们将继续学习Swift的面向对象编程特性，包括类和结构体。</p>

  </div>
  <!--文末结束语-->
  
    <div style="text-align:center;color: #ccc;font-size:24px;"> --- 本文结束 <i class="iconfont icon-heartbeat" style="font-size:24px;"></i> The End --- </div>
  
  <!--页脚广告-->
  
  <div class="mdui-divider"></div>
  
  <nav>
    
      <a rel="prev" class="post-nav-item mdui-float-left" href="/ios.github.io/2025/12/07/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89/">
        <i class="iconfont icon-angle-left"></i>
        <span>swift学习日记(五)</span>
      </a>
    
    
      <a rel="next" class="post-nav-item mdui-float-right" href="/ios.github.io/2025/12/05/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/">
        <span>swift学习日记(三)</span>
        <i class="iconfont icon-angle-right"></i>
      </a>
    
  </nav>
</article>




  <div class="toc-button"  style="z-index: 100;">
    <button class="mdui-fab mdui-ripple mdui-color-teal" mdui-menu="{target: '#toc'}"><i class="iconfont icon-list"></i></button>
    <ul class="mdui-menu" id="toc">
      <li class="mdui-menu-item">
        <a href="/ios.github.io/2025/12/06/swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/" id="toc-header" class="mdui-ripple">文章目录</a>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Swift%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E5%87%BD%E6%95%B0%E4%B8%8E%E9%97%AD%E5%8C%85"><span class="toc-number">1.</span> <span class="toc-text">Swift学习日记（四）：函数与闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">一、引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E8%B0%83%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">二、函数的定义与调用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 函数的基本定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%97%A0%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 无参数函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%97%A0%E8%BF%94%E5%9B%9E%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 无返回值函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%A4%9A%E8%BF%94%E5%9B%9E%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 多返回值函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">1.3.</span> <span class="toc-text">三、函数参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%A4%96%E9%83%A8%E5%8F%82%E6%95%B0%E5%90%8D"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 外部参数名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%82%E6%95%B0%E6%A0%87%E7%AD%BE"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 参数标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 默认参数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. 可变参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-number">1.3.5.</span> <span class="toc-text">5. 输入输出参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.4.</span> <span class="toc-text">四、函数类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 函数类型的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 函数类型作为参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 函数类型作为返回值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%B5%8C%E5%A5%97%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.</span> <span class="toc-text">五、嵌套函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E9%97%AD%E5%8C%85"><span class="toc-number">1.6.</span> <span class="toc-text">六、闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%97%AD%E5%8C%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. 闭包的基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%97%AD%E5%8C%85%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. 闭包的类型推断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%82%E6%95%B0%E5%90%8D%E7%A7%B0%E7%BC%A9%E5%86%99"><span class="toc-number">1.6.3.</span> <span class="toc-text">3. 参数名称缩写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B0%BE%E9%9A%8F%E9%97%AD%E5%8C%85"><span class="toc-number">1.6.4.</span> <span class="toc-text">4. 尾随闭包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%8D%95%E8%8E%B7%E5%80%BC"><span class="toc-number">1.6.5.</span> <span class="toc-text">5. 捕获值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E9%97%AD%E5%8C%85%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-number">1.6.6.</span> <span class="toc-text">6. 闭包的内存管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%86%85%E5%AE%B9%E6%9C%BA%E5%88%B6%E4%B8%8E%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">1.7.</span> <span class="toc-text">七、内容机制与知识点总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%86%85%E5%AE%B9%E6%9C%BA%E5%88%B6"><span class="toc-number">1.7.1.</span> <span class="toc-text">1. 内容机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">1.7.2.</span> <span class="toc-text">2. 知识点总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.8.</span> <span class="toc-text">八、遇到的问题及解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E6%A0%87%E7%AD%BE%E4%B8%8E%E5%A4%96%E9%83%A8%E5%8F%82%E6%95%B0%E5%90%8D%E6%B7%B7%E6%B7%86"><span class="toc-number">1.8.1.</span> <span class="toc-text">1. 函数参数标签与外部参数名混淆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%97%AD%E5%8C%85%E5%AF%BC%E8%87%B4%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8"><span class="toc-number">1.8.2.</span> <span class="toc-text">2. 闭包导致的循环引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E4%B8%8E%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0%E7%9A%84%E6%B7%B7%E6%B7%86"><span class="toc-number">1.8.3.</span> <span class="toc-text">3. 可变参数与输入输出参数的混淆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC%E6%97%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD%E9%97%AE%E9%A2%98"><span class="toc-number">1.8.4.</span> <span class="toc-text">4. 函数类型作为返回值时的类型推断问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%97%AD%E5%8C%85%E6%8D%95%E8%8E%B7%E5%80%BC%E7%9A%84%E6%97%B6%E6%9C%BA%E9%97%AE%E9%A2%98"><span class="toc-number">1.8.5.</span> <span class="toc-text">5. 闭包捕获值的时机问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E9%AB%98%E9%98%B6%E7%94%A8%E6%B3%95"><span class="toc-number">1.9.</span> <span class="toc-text">九、高阶用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%AB%98%E7%BA%A7%E5%87%BD%E6%95%B0%E6%8A%80%E5%B7%A7"><span class="toc-number">1.9.1.</span> <span class="toc-text">1. 高级函数技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%AF%E9%87%8C%E5%8C%96%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.1.1.</span> <span class="toc-text">柯里化函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.1.2.</span> <span class="toc-text">泛型函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%AB%98%E7%BA%A7%E9%97%AD%E5%8C%85%E6%8A%80%E5%B7%A7"><span class="toc-number">1.9.2.</span> <span class="toc-text">2. 高级闭包技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%83%E9%80%B8%E9%97%AD%E5%8C%85%E4%B8%8E%E9%9D%9E%E9%80%83%E9%80%B8%E9%97%AD%E5%8C%85"><span class="toc-number">1.9.2.1.</span> <span class="toc-text">逃逸闭包与非逃逸闭包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%97%AD%E5%8C%85"><span class="toc-number">1.9.2.2.</span> <span class="toc-text">自动闭包</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.9.3.</span> <span class="toc-text">3. 函数式编程模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%BB%84%E5%90%88"><span class="toc-number">1.9.3.1.</span> <span class="toc-text">函数组合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E5%BA%94%E7%94%A8"><span class="toc-number">1.9.3.2.</span> <span class="toc-text">部分应用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">1.9.4.</span> <span class="toc-text">4. 性能优化策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96"><span class="toc-number">1.9.4.1.</span> <span class="toc-text">闭包内存优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%BC%98%E5%8C%96"><span class="toc-number">1.9.4.2.</span> <span class="toc-text">函数类型优化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.9.5.</span> <span class="toc-text">5. 最佳实践</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.9.5.1.</span> <span class="toc-text">函数设计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E4%BD%BF%E7%94%A8"><span class="toc-number">1.9.5.2.</span> <span class="toc-text">闭包使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B"><span class="toc-number">1.9.5.3.</span> <span class="toc-text">函数式编程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E5%AE%9E%E8%B7%B5%E7%BB%83%E4%B9%A0"><span class="toc-number">1.10.</span> <span class="toc-text">十、实践练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0"><span class="toc-number">1.10.1.</span> <span class="toc-text">1. 函数基础练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A01%EF%BC%9A%E6%B8%A9%E5%BA%A6%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.1.1.</span> <span class="toc-text">练习1：温度转换函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A02%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%95%B0%E7%BB%84%E6%80%BB%E5%92%8C"><span class="toc-number">1.10.1.2.</span> <span class="toc-text">练习2：计算数组总和</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E7%BB%83%E4%B9%A0"><span class="toc-number">1.10.2.</span> <span class="toc-text">2. 函数参数练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A03%EF%BC%9A%E5%B8%A6%E6%9C%89%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.2.1.</span> <span class="toc-text">练习3：带有默认参数的函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A04%EF%BC%9A%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-number">1.10.2.2.</span> <span class="toc-text">练习4：输入输出参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%97%AD%E5%8C%85%E7%BB%83%E4%B9%A0"><span class="toc-number">1.10.3.</span> <span class="toc-text">3. 闭包练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A05%EF%BC%9A%E4%BD%BF%E7%94%A8%E9%97%AD%E5%8C%85%E6%8E%92%E5%BA%8F"><span class="toc-number">1.10.3.1.</span> <span class="toc-text">练习5：使用闭包排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A06%EF%BC%9A%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8"><span class="toc-number">1.10.3.2.</span> <span class="toc-text">练习6：高阶函数应用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">1.11.</span> <span class="toc-text">十一、总结</span></a></li></ol></li></ol>
      </li>
    </ul>
  </div>



    <div id="comment" class="mdui-card mdui-p-a-2 mdui-m-b-5">
      <div class="mdui-tab" mdui-tab>
        
          <a href="#comment-tab0" class="mdui-ripple">gitalk</a>
        
          <a href="#comment-tab1" class="mdui-ripple">livere</a>
        
      </div>
      
        <div id="comment-tab0" class="mdui-p-a-2">
          <div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/js-md5@0.7.3/src/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
    clientID: '',
    clientSecret: '',
    repo: '',
    owner: '',
    admin: [''],
    id:  md5(location.pathname) ,
    distractionFreeMode: 'true',
  });
  gitalk.render('gitalk-container');
</script>
        </div>
      
        <div id="comment-tab1" class="mdui-p-a-2">
          <div id="lv-container" data-id="city" data-uid="">
  <script type="text/javascript">
    (function (d, s) {
      var j, e = d.getElementsByTagName(s)[0];
      if (typeof LivereTower === 'function') { return; }
      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;
      e.parentNode.insertBefore(j, e);
    })(document, 'script');
  </script>
  <noscript>Please enable JavaScript to view the comments powered by LiveRe.</noscript>
</div>
        </div>
      
    </div>

  </main>
  <footer id="footer" class="mdui-text-center mdui-m-t-5 mdui-p-b-2 mdui-p-t-4 mdui-color-theme">
  <div class="mdui-container">
    <div class="mdui-row">
      
      <span>
        &copy; 2025 - 2025 
        
        猪会飞
      </span>
    </div>
    <div class="mdui-row">
      
        <span>Theme: <a href="https://github.com/kb1000fx/hexo-theme-meadow" rel="noopener" target="_blank">Meadow</a></span>
      
    </div>
    <div class="mdui-row">
      
    </div>
 </div>
</footer>
  
  <button id="gotop" class="mdui-fab mdui-fab-fixed mdui-fab-hide mdui-ripple mdui-color-teal" style="z-index:100;"><i class="iconfont icon-arrowup"></i></button>
  
  




    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({
        startOnLoad: true,
        theme: "default"
    });</script>




    
<script src="/ios.github.io/js/mdui.min.v1.0.0.js"></script>




<script src="/ios.github.io/js/meadow.js"></script>

</body>
</html >